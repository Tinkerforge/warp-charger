---
description: MQTT Connection
---
{/* This file is autogenerated. Edit warp-charger/api_doc_generator/mqtt.py! */}
import MultilineTabs from '@site/src/components/MultilineTabs';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# MQTT Connection

<Tabs groupId="hardwareType" queryString className="hidden-tabs">
<TabItem value="warp1">
## `mqtt/state` {#mqtt_state_warp1}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_warp1}


The MQTT configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1
}
```



#### Write
```bash
curl http://$HOST/mqtt/config -d '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1
}
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/config_update -m '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/auto_discovery_config` {#mqtt_auto_discovery_config_warp1}


The MQTT auto discovery configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
```bash
curl http://$HOST/mqtt/auto_discovery_config -d '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/auto_discovery_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/auto_discovery_config_update -m '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_mode`<br/>int</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **0** - Auto discovery disabled
        - **1** - Auto discovery in generic mode; Compatible with e.g. openHAB and Domoticz
        - **2** - Auto discovery in Home Assistant mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_prefix`<br/>string</th>
    <td>
        Prefix to which the information used for auto discovery is sent. Typically homeassistant
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="warp2">
## `mqtt/state` {#mqtt_state_warp2}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_warp2}


The MQTT configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
```bash
curl http://$HOST/mqtt/config -d '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/config_update -m '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/auto_discovery_config` {#mqtt_auto_discovery_config_warp2}


The MQTT auto discovery configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
```bash
curl http://$HOST/mqtt/auto_discovery_config -d '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/auto_discovery_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/auto_discovery_config_update -m '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_mode`<br/>int</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **0** - Auto discovery disabled
        - **1** - Auto discovery in generic mode; Compatible with e.g. openHAB and Domoticz
        - **2** - Auto discovery in Home Assistant mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_prefix`<br/>string</th>
    <td>
        Prefix to which the information used for auto discovery is sent. Typically homeassistant
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="warp3">
## `mqtt/state` {#mqtt_state_warp3}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_warp3}


The MQTT configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
```bash
curl http://$HOST/mqtt/config -d '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/config_update -m '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/auto_discovery_config` {#mqtt_auto_discovery_config_warp3}


The MQTT auto discovery configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
```bash
curl http://$HOST/mqtt/auto_discovery_config -d '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/auto_discovery_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/auto_discovery_config_update -m '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_mode`<br/>int</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **0** - Auto discovery disabled
        - **1** - Auto discovery in generic mode; Compatible with e.g. openHAB and Domoticz
        - **2** - Auto discovery in Home Assistant mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_prefix`<br/>string</th>
    <td>
        Prefix to which the information used for auto discovery is sent. Typically homeassistant
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="wem">
## `mqtt/state` {#mqtt_state_wem}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_wem}


The MQTT configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
```bash
curl http://$HOST/mqtt/config -d '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wem_unterverteilung",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wem/unterverteilung",
  "client_name": "wem_unterverteilung",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1,
  "protocol": 3
}
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/config_update -m '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wem_unterverteilung",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wem/unterverteilung",
  "client_name": "wem_unterverteilung",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="wem2">
## `mqtt/state` {#mqtt_state_wem2}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_wem2}


The MQTT configuration.


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="any">
## `mqtt/state` {#mqtt_state_any}


The current MQTT state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/mqtt/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 2,
  "connection_start": 27649,
  "connection_end": 0,
  "last_error": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the MQTT broker
        
        
        
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connected
        - **3** - Error
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`last_error`<br/>int</th>
    <td>
        The last error that occurred. -1 if no error has occurred.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/config` {#mqtt_config_any}


The MQTT configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1
}
```



#### Write
```bash
curl http://$HOST/mqtt/config -d '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/config
```
```jsx
{
  "enable_mqtt": false,
  "broker_host": "test.mosquitto.org",
  "broker_port": 1883,
  "broker_username": "test",
  // highlight-start
  // Not returned
  "broker_password": null,
  // highlight-end
  "global_topic_prefix": "warp",
  "client_name": "",
  "interval": 1
}
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/config_update -m '{
  "enable_mqtt": true,
  "broker_host": "my_mosquitto.localdomain",
  "broker_port": 1883,
  "broker_username": "wallbox-garage",
  "broker_password": "meinpasswort",
  "global_topic_prefix": "wallbox/garage",
  "client_name": "wallbox-garage",
  "interval": 1,
  "protocol": 0,
  "cert_id": -1,
  "client_cert_id": -1,
  "client_key_id": -1,
  "path": ""
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_mqtt`<br/>bool</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        
        
        
        - **true** - If MQTT is enabled.
        - **false** - If MQTT is disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`read_only`<br/>bool</th>
    <td>
        Indicates whether the MQTT API may only be read or also written.
        
        
        
        - **true** - If the MQTT API may only be read.
        - **false** - If the MQTT API may be read and written.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`protocol`<br/>int</th>
    <td>
        The MQTT protocol to use
        
        
        
        - **0** - MQTT (MQTT over TCP; unencrypted)
        - **1** - MQTTS (MQTT over TLS; encrypted)
        - **2** - WS (MQTT over WebSocket; unencrypted)
        - **3** - WSS (MQTT over WebSocket Secure or MQTT over WebSocket over TLS; encrypted)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_host`<br/>string</th>
    <td>
        Hostname or IP address of the MQTT broker to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_port`<br/>int</th>
    <td>
        Port of the MQTT broker to which the device should connect. Typically 1883.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_username`<br/>string</th>
    <td>
        Username to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`broker_password`<br/>string</th>
    <td>
        Password to use for connecting to the broker. Empty if no authentication is used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`global_topic_prefix`<br/>string</th>
    <td>
        Prefix prepended to all MQTT topics. Normally warp/[device UID] or warp2/[device UID].
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_name`<br/>string</th>
    <td>
        Name under which the device registers with the broker. <strong>This is not the username for authentication.</strong>
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`interval`<br/>int (<abbr title="Second">s</abbr>)</th>
    <td>
        Minimum send interval per topic in seconds. Messages are only sent when there are changes to the payload. With a send interval of x seconds, at most one message per topic is sent every x seconds. If the content changes multiple times in x seconds, only the most recent content is transmitted.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`path`<br/>string</th>
    <td>
        Part of the MQTT-over-WS URL after the hostname. Must start with /. Ignored if "protocol" 0 or 1 is selected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`cert_id`<br/>int</th>
    <td>
        ID of the CA certificate used to verify the certificate of the MQTTS or WSS server. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        
        
        
        - **-1** - Use embedded certificate bundle
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
    <td>
        ID of the client certificate to be used for establishing a TLS-encrypted connection. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        
        
        
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
    <td>
        ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
        
        
        
        - **-1** - Not used
        - **>= 0** - Use certificate with this ID
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `mqtt/auto_discovery_config` {#mqtt_auto_discovery_config_any}

**Bentigt das Feature <a href="#features_evse"><code>"evse"</code></a>**
The MQTT auto discovery configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
```bash
curl http://$HOST/mqtt/auto_discovery_config -d '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/mqtt/auto_discovery_config
```
```jsx
{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }
```



#### Write
            With MQTT on <code>$PREFIX/mqtt/auto_discovery_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/mqtt/auto_discovery_config_update -m '{ "auto_discovery_mode": 2, "auto_discovery_prefix": "homeassistant" }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_mode`<br/>int</th>
    <td>
        Indicates whether an MQTT connection to the configured broker should be established.
        
        
        
        - **0** - Auto discovery disabled
        - **1** - Auto discovery in generic mode; Compatible with e.g. openHAB and Domoticz
        - **2** - Auto discovery in Home Assistant mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`auto_discovery_prefix`<br/>string</th>
    <td>
        Prefix to which the information used for auto discovery is sent. Typically homeassistant
    </td>
</tr>
    </tbody>
</table>
</TabItem>
</Tabs>

export const toc = [
    {
    "value": "mqtt/state",
    "id": "mqtt_state",
    "level": 2,
    
},{
    "value": "mqtt/config",
    "id": "mqtt_config",
    "level": 2,
    
},{
    "value": "mqtt/auto_discovery_config",
    "id": "mqtt_auto_discovery_config",
    "level": 2,
    "hardwareType": ["warp1","warp2","warp3"]
},
];
