---
description: Wi-Fi Configuration
---
{/* This file is autogenerated. Edit warp-charger/api_doc_generator/wifi.py! */}
import MultilineTabs from '@site/src/components/MultilineTabs';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# Wi-Fi Configuration

<Tabs groupId="hardwareType" queryString className="hidden-tabs">
<TabItem value="warp1">
## `wifi/state` {#wifi_state_warp1}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_warp1}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_warp1}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_warp1}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
```bash
curl http://$HOST/wifi/ap_config -d '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/ap_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/ap_config_update -m '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_warp1}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
<TabItem value="warp2">
## `wifi/state` {#wifi_state_warp2}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_warp2}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_warp2}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_warp2}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp2-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
```bash
curl http://$HOST/wifi/ap_config -d '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp2-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/ap_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/ap_config_update -m '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_warp2}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp2-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
<TabItem value="warp3">
## `wifi/state` {#wifi_state_warp3}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_warp3}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_warp3}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_warp3}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp3-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
```bash
curl http://$HOST/wifi/ap_config -d '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp3/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp3-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/ap_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/ap_config_update -m '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_warp3}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp3-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
<TabItem value="wem">
## `wifi/state` {#wifi_state_wem}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_wem}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_wem}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_wem}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_wem}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
<TabItem value="wem2">
## `wifi/state` {#wifi_state_wem2}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_wem2}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_wem2}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_wem2}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_wem2}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
<TabItem value="any">
## `wifi/state` {#wifi_state_any}


The current Wi-Fi state.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/wifi/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "connection_state": 3,
  "connection_start": 10117,
  "connection_end": 0,
  "ap_state": 2,
  "ap_bssid": "C4:5B:BE:C0:FF:EE",
  "sta_ip": "10.1.2.3",
  "sta_subnet": "255.255.255.0",
  "sta_rssi": -38,
  "sta_bssid": "71:21:CE:12:F0:12"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_state`<br/>int</th>
    <td>
        State of the connection to the configured Wi-Fi. See [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config)
        
        
        
        - **0** - Not configured
        - **1** - Not connected
        - **2** - Connecting
        - **3** - Connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_state`<br/>int</th>
    <td>
        State of the Wi-Fi access point. See [`wifi/ap_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_ap_config)
        
        
        
        - **0** - Disabled
        - **1** - Enabled
        - **2** - Fallback inactive
        - **3** - Fallback active
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_bssid`<br/>string</th>
    <td>
        BSSID of the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_sta_count`<br/>int</th>
    <td>
        Number of devices currently connected to the Wi-Fi access point.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_ip`<br/>string</th>
    <td>
        Current IP of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_subnet`<br/>string</th>
    <td>
        Current subnet mask of the device in the configured network. 0.0.0.0 if no connection exists.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_rssi`<br/>int</th>
    <td>
        The current reception quality. 0 if no connection exists, otherwise negative. Values closer to 0 indicate better reception.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sta_bssid`<br/>string</th>
    <td>
        The BSSID of the remote station to which the device is connected.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_start`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was established.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`connection_end`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time in milliseconds when the last connection was disconnected.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan` {#wifi_scan_any}


Triggers a scan for Wi-Fi networks. The scan results can currently only be queried via HTTP.
**Empty payload. One of the following values must be passed: `null`, `""`, `false`, `0`, `[]` or `{}`**
<Tabs groupId="apiType" queryString className="hidden-tabs"><TabItem value="http"></TabItem><TabItem value="mqtt"><Admonition type="warning" title="Triggers a one-time action. Messages retained via the broker are ignored."></Admonition></TabItem></Tabs>
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Write
```bash
curl http://$HOST/wifi/scan -d 'null'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/scan -m 'null'
```



        </TabItem>
    </Tabs>
:::



<br/><br/><br/>
## `wifi/sta_config` {#wifi_sta_config_any}


The Wi-Fi connection configuration.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
```bash
curl http://$HOST/wifi/sta_config -d '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/sta_config
```
```jsx
{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/sta_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/sta_config_update -m '{
  "enable_sta": true,
  "ssid": "Mein WLAN",
  "bssid": [12, 34, 56, 78, 90, 12],
  "bssid_lock": true,
  "passphrase": null,
  "ip": "0.0.0.0",
  "gateway": "0.0.0.0",
  "subnet": "0.0.0.0",
  "dns": "0.0.0.0",
  "dns2": "0.0.0.0",
  "wpa_eap_config": [0, null]
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_sta`<br/>bool</th>
    <td>
        Indicates whether a Wi-Fi connection to the configured network should be established.
        
        
        
        - **true** - If a Wi-Fi connection should be established.
        - **false** - If not.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which the device should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>int[6]</th>
    <td>
        BSSID to which the device should connect. This entry is optional and can be left empty, but is required for bssid_lock.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid_lock`<br/>bool</th>
    <td>
        Specifies whether to connect only to the Wi-Fi network with the specified BSSID. Leave disabled if repeaters or similar should be used.
        
        
        
        - **true** - Connects only to the access point with the specified BSSID.
        - **false** - Connects to any access point with the configured SSID, e.g., with repeaters.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_11b`<br/>bool</th>
    <td>
        Specifies whether the outdated and slow [802.11b mode](https://en.wikipedia.org/wiki/IEEE_802.11b-1999) may be used. This also slows down other devices connected to the Wi-Fi, but can slightly improve reception quality and connection robustness.
        
        
        
        - **true** - Allow use of 802.11b mode
        - **false** - Forbid use of 802.11b mode
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes. This entry is optional and can be left empty if connecting to an unencrypted Wi-Fi network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns`<br/>string</th>
    <td>
        DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`dns2`<br/>string</th>
    <td>
        Alternative DNS server address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`wpa_eap_config`<br/>[Union](/interfaces/mqtt_http/introduction.md#unions)</th>
    <td>
        WPA Enterprise configuration
        <MultilineTabs className="unique-tabs">
        <TabItem value="0" label="0 - WPA Personal">
        null: WPA Personal
        </TabItem>
        
        <TabItem value="1" label="1 - EAP-TLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        
        <TabItem value="2" label="2 - EAP-PEAP or EAP-TTLS">
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ca_cert_id`<br/>int</th>
            <td>
                ID of the CA certificate used to verify the RADIUS server's certificate. See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`identity`<br/>string</th>
            <td>
                Anonymous identity for connection establishment to the RADIUS server. (Optional) [See here for details](https://security.stackexchange.com/a/201848)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`username`<br/>string</th>
            <td>
                Username
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`password`<br/>string</th>
            <td>
                Password
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_cert_id`<br/>int</th>
            <td>
                ID of the client certificate used for authorization with the RADIUS server. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`client_key_id`<br/>int</th>
            <td>
                ID of the certificate key used to encrypt the client certificate. (Optional) See [`certs/state`](/interfaces/mqtt_http/api_reference/certs.mdx#certs_state)
            </td>
        </tr>
            </tbody>
        </table>
        </TabItem>
        </MultilineTabs>
        
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/ap_config` {#wifi_ap_config_any}


The Wi-Fi access point configuration. <strong>Warning! If the access point is disabled and the Wi-Fi connection or LAN connection cannot be established or was not configured, the ESP can only be reached via a factory reset!</strong> We recommend always leaving the access point in fallback mode.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
```bash
curl http://$HOST/wifi/ap_config -d '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/wifi/ap_config
```
```jsx
{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "warp-AbCd",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}
```



#### Write
            With MQTT on <code>$PREFIX/wifi/ap_config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/wifi/ap_config_update -m '{
  "enable_ap": true,
  "ap_fallback_only": true,
  "ssid": "wallbox_garage",
  "hide_ssid": false,
  "passphrase": null,
  "channel": 0,
  "ip": "10.0.0.1",
  "gateway": "10.0.0.1",
  "subnet": "255.255.255.0"
}'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`enable_ap`<br/>bool</th>
    <td>
        Indicates whether the access point should be enabled.
        
        
        
        - **true** - The AP should be enabled. Possibly only as fallback (see ap_fallback_only)
        - **false** - The AP should always remain disabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ap_fallback_only`<br/>bool</th>
    <td>
        Indicates whether the access point should only be enabled if Wi-Fi and LAN connections cannot be established. Ignored if enable_ap is false.
        
        
        
        - **true** - The AP should only be enabled if Wi-Fi and LAN connections cannot be established.
        - **false** - The AP should always remain enabled.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
    <td>
        SSID to which devices should connect.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`hide_ssid`<br/>bool</th>
    <td>
        true if the SSID should be hidden, otherwise false.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`passphrase`<br/>string</th>
    <td>
        The Wi-Fi passphrase. Maximum 63 bytes.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
    <td>
        Channel on which the access point should be accessible. Valid values are 1 to 13, or 0 if an unoccupied channel should be selected at startup.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`ip`<br/>string</th>
    <td>
        IP address the device should use in the configured network. This entry and the following are optional and can be passed as "0.0.0.0" if automatic IP address assignment (DHCP) should be used.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`gateway`<br/>string</th>
    <td>
        Gateway address the device should use in the configured network.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`subnet`<br/>string</th>
    <td>
        Subnet mask the device should use in the configured network.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `wifi/scan_results` {#wifi_scan_results_any}
<Tabs groupId="apiType" queryString className="hidden-tabs">
    <TabItem value="http" label="HTTP (curl)">


The Wi-Fi networks found as a result of a search triggered by wifi/scan.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
```bash
curl http://$HOST/wifi/scan_results
```
```jsx
[
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0C",
    "rssi": -43,
    "channel": 9,
    "encryption": 3
  },
  {
    "ssid": "Mein WLAN",
    "bssid": "0C:22:38:4E:5A:0D",
    "rssi": -43,
    "channel": 13,
    "encryption": 3
  },
  {
    "ssid": "Anderes WLAN",
    "bssid": "C0:FF:EE:4E:5A:0C",
    "rssi": -75,
    "channel": 1,
    "encryption": 3
  }
]
```
Zwei Repeater des selben WLANs haben die gleiche SSID, aber unterschiedliche BSSIDs.
Durch das bssid_lock in [`wifi/sta_config`](/interfaces/mqtt_http/api_reference/wifi.mdx#wifi_sta_config) kann eine Verbindung zu einem spezifischen Repeater
erzwungen werden.


        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
            **Only supported by the HTTP API**
        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Index</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`[..]`<br/>object</th>
    <td>
        
        <table>
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Meaning</th>
                </tr>
            </thead>
            <tbody>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`ssid`<br/>string</th>
            <td>
                SSID of the found Wi-Fi network. Empty for hidden access points.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`bssid`<br/>string</th>
            <td>
                BSSID of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`rssi`<br/>int</th>
            <td>
                The reception quality of the found Wi-Fi network. Always a negative value, where values close to 0 indicate better reception quality. [See here for details](https://en.wikipedia.org/wiki/Received_signal_strength_indication)
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`channel`<br/>int</th>
            <td>
                Channel of the found Wi-Fi network.
            </td>
        </tr>
        
        <tr>
            <th scope="row" style={{whiteSpace: "nowrap"}}>`encryption`<br/>int</th>
            <td>
                Encryption standard of the found Wi-Fi network
                
                
                
                - **0** - Unencrypted
                - **1** - WEP
                - **2** - WPA-PSK
                - **3** - WPA2-PSK
                - **4** - WPA/WPA2-PSK
                - **5** - WPA2-Enterprise
                - **6** - Unknown
            </td>
        </tr>
            </tbody>
        </table>
    </td>
</tr>
    </tbody>
</table>
    </TabItem>
    <TabItem value="mqtt" label="MQTT (mosquitto)">
        <Admonition type="warning" title="Only supported by the HTTP API"></Admonition>
    </TabItem>
</Tabs>
</TabItem>
</Tabs>

export const toc = [
    {
    "value": "wifi/state",
    "id": "wifi_state",
    "level": 2,
    
},{
    "value": "wifi/scan",
    "id": "wifi_scan",
    "level": 2,
    
},{
    "value": "wifi/sta_config",
    "id": "wifi_sta_config",
    "level": 2,
    
},{
    "value": "wifi/ap_config",
    "id": "wifi_ap_config",
    "level": 2,
    
},{
    "value": "wifi/scan_results",
    "id": "wifi_scan_results",
    "level": 2,
    
},
];
