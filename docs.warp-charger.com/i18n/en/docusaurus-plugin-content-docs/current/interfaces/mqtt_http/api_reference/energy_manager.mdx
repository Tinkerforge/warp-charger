---
description: Energy Manager Configuration
---
{/* This file is autogenerated. Edit warp-charger/api_doc_generator/energy_manager.py! */}
import MultilineTabs from '@site/src/components/MultilineTabs';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# Energy Manager Configuration
The `energy_manager` module manages the state and configuration of the WARP Energy Manager Bricklet.
<Tabs groupId="hardwareType" queryString className="hidden-tabs">
<TabItem value="warp1">
Not supported on this hardware!
</TabItem>
<TabItem value="warp2">
Not supported on this hardware!
</TabItem>
<TabItem value="warp3">
Not supported on this hardware!
</TabItem>
<TabItem value="wem">
## `energy_manager/config` {#energy_manager_config_wem}


Energy Manager configuration
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```

#### Read
```bash
curl http://$HOST/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
```bash
curl http://$HOST/energy_manager/config -d '{ "contactor_installed": true }'
```

or abbreviated:

```bash
curl http://$HOST/energy_manager/config -d 'true'
```




        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
            With MQTT on <code>$PREFIX/energy_manager/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m '{ "contactor_installed": true }'
```

or abbreviated:

```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m 'true'
```




        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_installed`<br/>bool</th>
    <td>
        Indicates whether a contactor is connected that can switch the controlled wallboxes between three-phase and single-phase operation. Input 4 is then automatically used for contactor monitoring.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/state` {#energy_manager_state_wem}


Energy Manager state
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "phases_switched": 1,
  "input3_state": false,
  "input4_state": false,
  "relay_state": false,
  "error_flags": 0,
  "config_error_flags": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`phases_switched`<br/>int</th>
    <td>
        Phase switching state
        - **1** - One phase connected
        - **3** - Three phases connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input3_state`<br/>bool</th>
    <td>
        State of input 3
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input4_state`<br/>bool</th>
    <td>
        State of input 4
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`relay_state`<br/>bool</th>
    <td>
        State of the relay
        - **true** - Relay closed
        - **false** - Relay open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`error_flags`<br/>int</th>
    <td>
        Active error states of the Energy Manager. This is a bitmask, so any combination of error values can occur.
        - **0** - No error
        - **0x00000002** - No network connection (LAN/WLAN)
        - **0x00010000** - Contactor monitoring has triggered
        - **0x01000000** - Internal error, Bricklet not reachable
        - **0x02000000** - Internal error, SD card error
        - **0x80000000** - Invalid configuration, details in config_error_flags
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`config_error_flags`<br/>int</th>
    <td>
        Active configuration errors of the Energy Manager. This is a bitmask, so any combination of configuration errors can occur.
        - **0** - No error
        - **0x00000001** - Phase switching or contactor not configured
        - **0x00000002** - Maximum total current of wallboxes not configured
        - **0x00000004** - No wallboxes configured
        - **0x00000008** - Excess charging enabled but no electricity meter configured
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/low_level_state` {#energy_manager_low_level_state_wem}


Low-level state of the Energy Manager
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/low_level_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/low_level_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "consecutive_bricklet_errors": 0,
  "contactor": false,
  "contactor_check_state": 1,
  "input_voltage": 11925,
  "led_rgb": [0, 0, 0],
  "uptime": 940868435
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`consecutive_bricklet_errors`<br/>int</th>
    <td>
        Number of consecutive internal communication errors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor`<br/>bool</th>
    <td>
        Contactor state set by the Energy Manager
        - **true** - Contactor closed
        - **false** - Contactor open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_check_state`<br/>int</th>
    <td>
        Contactor check state
        - **0** - Contactor monitoring has triggered (contactor defective)
        - **1** - No contactor error known (contactor OK)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input_voltage`<br/>int (<abbr title="Millivolt">mV</abbr>)</th>
    <td>
        Internal supply voltage in millivolts.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`led_rgb`<br/>int[3]</th>
    <td>
        Status LED color
        - **[0]** - Red: 0 (off) to 255 (maximum intensity)
        - **[1]** - Green: 0 (off) to 255 (maximum intensity)
        - **[2]** - Blue: 0 (off) to 255 (maximum intensity)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`uptime`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time since starting the Energy Manager Bricklet.<br/><br/>Attention: This time is measured directly via the processor clock. The accuracy is therefore only sufficient for time measurements in the range of minutes to a few hours. The time measurement overflows after approximately 50 days and starts again at 0.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_state` {#energy_manager_sdcard_state_wem}


Information about the inserted MicroSD card.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/sdcard_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/sdcard_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "sd_status": 0,
  "lfs_status": 0,
  "card_type": 12,
  "sector_count": 15759360,
  "sector_size": 512,
  "manufacturer_id": 116,
  "product_rev": 32,
  "product_name": "USDU1"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sd_status`<br/>int</th>
    <td>
        SD card status
        - **0** - OK
        - **1** - READ_BLOCK_TIMEOUT
        - **2** - WRITE_BLOCK_TIMEOUT
        - **3** - RESPONSE_TIMEOUT
        - **11** - ERROR_INIT_TYPE
        - **12** - ERROR_INIT_VER_OR_VOLTAGE
        - **13** - ERROR_INIT_ACMD41
        - **14** - ERROR_INIT_CMD58
        - **15** - ERROR_INIT_CMD0
        - **21** - ERROR_CID_START
        - **22** - ERROR_CID_CMD10
        - **31** - ERROR_CSD_START
        - **32** - ERROR_CSD_CMD9
        - **41** - ERROR_COUNT_TO_HIGH
        - **51** - ERROR_NO_CARD
        - **255** - ERROR_API_FAILURE
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`lfs_status`<br/>int</th>
    <td>
        Status of the file system (LittleFS) on the SD card
        - **0** - OK
        - **255** - ERROR_API_FAILURE
        - **256** - SD card is being formatted
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`card_type`<br/>int</th>
    <td>
        SD card type
        - **0** - No SD card found
        - **1** - MMC
        - **2** - SD
        - **4** - SDSC
        - **12** - SDHC/SDXC
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_count`<br/>int</th>
    <td>
        SD card size in sectors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_size`<br/>int</th>
    <td>
        Size of a sector
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`manufacturer_id`<br/>int</th>
    <td>
        Manufacturer ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_rev`<br/>int</th>
    <td>
        Product revision
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_name`<br/>string</th>
    <td>
        Product name
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_format` {#energy_manager_sdcard_format_wem}


Formats the inserted SD card and thus deletes the energy balance history. <strong>Cannot be undone!</strong> A restart is automatically performed afterwards.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem-AbCd
```
#### Write
```bash
curl http://$HOST/energy_manager/sdcard_format -d '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/sdcard_format -m '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`do_i_know_what_i_am_doing`<br/>bool</th>
    <td>
        Indicates whether the SD card should be formatted
        - **true** - Format SD card
        - **false** - Perform no action
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="wem2">
## `energy_manager/config` {#energy_manager_config_wem2}


Energy Manager configuration
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```

#### Read
```bash
curl http://$HOST/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
```bash
curl http://$HOST/energy_manager/config -d '{ "contactor_installed": true }'
```

or abbreviated:

```bash
curl http://$HOST/energy_manager/config -d 'true'
```




        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
            With MQTT on <code>$PREFIX/energy_manager/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m '{ "contactor_installed": true }'
```

or abbreviated:

```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m 'true'
```




        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_installed`<br/>bool</th>
    <td>
        Indicates whether a contactor is connected that can switch the controlled wallboxes between three-phase and single-phase operation. Input 4 is then automatically used for contactor monitoring.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/state` {#energy_manager_state_wem2}


Energy Manager state
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "phases_switched": 1,
  "input3_state": false,
  "input4_state": false,
  "relay_state": false,
  "error_flags": 0,
  "config_error_flags": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`phases_switched`<br/>int</th>
    <td>
        Phase switching state
        - **1** - One phase connected
        - **3** - Three phases connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input3_state`<br/>bool</th>
    <td>
        State of input 3
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input4_state`<br/>bool</th>
    <td>
        State of input 4
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`relay_state`<br/>bool</th>
    <td>
        State of the relay
        - **true** - Relay closed
        - **false** - Relay open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`error_flags`<br/>int</th>
    <td>
        Active error states of the Energy Manager. This is a bitmask, so any combination of error values can occur.
        - **0** - No error
        - **0x00000002** - No network connection (LAN/WLAN)
        - **0x00010000** - Contactor monitoring has triggered
        - **0x01000000** - Internal error, Bricklet not reachable
        - **0x02000000** - Internal error, SD card error
        - **0x80000000** - Invalid configuration, details in config_error_flags
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`config_error_flags`<br/>int</th>
    <td>
        Active configuration errors of the Energy Manager. This is a bitmask, so any combination of configuration errors can occur.
        - **0** - No error
        - **0x00000001** - Phase switching or contactor not configured
        - **0x00000002** - Maximum total current of wallboxes not configured
        - **0x00000004** - No wallboxes configured
        - **0x00000008** - Excess charging enabled but no electricity meter configured
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/low_level_state` {#energy_manager_low_level_state_wem2}


Low-level state of the Energy Manager
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/low_level_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/low_level_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "consecutive_bricklet_errors": 0,
  "contactor": false,
  "contactor_check_state": 1,
  "input_voltage": 11925,
  "led_rgb": [0, 0, 0],
  "uptime": 940868435
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`consecutive_bricklet_errors`<br/>int</th>
    <td>
        Number of consecutive internal communication errors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor`<br/>bool</th>
    <td>
        Contactor state set by the Energy Manager
        - **true** - Contactor closed
        - **false** - Contactor open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_check_state`<br/>int</th>
    <td>
        Contactor check state
        - **0** - Contactor monitoring has triggered (contactor defective)
        - **1** - No contactor error known (contactor OK)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input_voltage`<br/>int (<abbr title="Millivolt">mV</abbr>)</th>
    <td>
        Internal supply voltage in millivolts.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`led_rgb`<br/>int[3]</th>
    <td>
        Status LED color
        - **[0]** - Red: 0 (off) to 255 (maximum intensity)
        - **[1]** - Green: 0 (off) to 255 (maximum intensity)
        - **[2]** - Blue: 0 (off) to 255 (maximum intensity)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`uptime`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time since starting the Energy Manager Bricklet.<br/><br/>Attention: This time is measured directly via the processor clock. The accuracy is therefore only sufficient for time measurements in the range of minutes to a few hours. The time measurement overflows after approximately 50 days and starts again at 0.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_state` {#energy_manager_sdcard_state_wem2}


Information about the inserted MicroSD card.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/sdcard_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/sdcard_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "sd_status": 0,
  "lfs_status": 0,
  "card_type": 12,
  "sector_count": 15759360,
  "sector_size": 512,
  "manufacturer_id": 116,
  "product_rev": 32,
  "product_name": "USDU1"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sd_status`<br/>int</th>
    <td>
        SD card status
        - **0** - OK
        - **1** - READ_BLOCK_TIMEOUT
        - **2** - WRITE_BLOCK_TIMEOUT
        - **3** - RESPONSE_TIMEOUT
        - **11** - ERROR_INIT_TYPE
        - **12** - ERROR_INIT_VER_OR_VOLTAGE
        - **13** - ERROR_INIT_ACMD41
        - **14** - ERROR_INIT_CMD58
        - **15** - ERROR_INIT_CMD0
        - **21** - ERROR_CID_START
        - **22** - ERROR_CID_CMD10
        - **31** - ERROR_CSD_START
        - **32** - ERROR_CSD_CMD9
        - **41** - ERROR_COUNT_TO_HIGH
        - **51** - ERROR_NO_CARD
        - **255** - ERROR_API_FAILURE
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`lfs_status`<br/>int</th>
    <td>
        Status of the file system (LittleFS) on the SD card
        - **0** - OK
        - **255** - ERROR_API_FAILURE
        - **256** - SD card is being formatted
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`card_type`<br/>int</th>
    <td>
        SD card type
        - **0** - No SD card found
        - **1** - MMC
        - **2** - SD
        - **4** - SDSC
        - **12** - SDHC/SDXC
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_count`<br/>int</th>
    <td>
        SD card size in sectors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_size`<br/>int</th>
    <td>
        Size of a sector
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`manufacturer_id`<br/>int</th>
    <td>
        Manufacturer ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_rev`<br/>int</th>
    <td>
        Product revision
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_name`<br/>string</th>
    <td>
        Product name
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_format` {#energy_manager_sdcard_format_wem2}


Formats the inserted SD card and thus deletes the energy balance history. <strong>Cannot be undone!</strong> A restart is automatically performed afterwards.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. wem2-AbCd
```
#### Write
```bash
curl http://$HOST/energy_manager/sdcard_format -d '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. wem2/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/sdcard_format -m '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`do_i_know_what_i_am_doing`<br/>bool</th>
    <td>
        Indicates whether the SD card should be formatted
        - **true** - Format SD card
        - **false** - Perform no action
    </td>
</tr>
    </tbody>
</table>
</TabItem>
<TabItem value="any">
## `energy_manager/config` {#energy_manager_config_any}


Energy Manager configuration
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```

#### Read
```bash
curl http://$HOST/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
```bash
curl http://$HOST/energy_manager/config -d '{ "contactor_installed": true }'
```

or abbreviated:

```bash
curl http://$HOST/energy_manager/config -d 'true'
```




        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```

#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/config
```
```jsx
{ "contactor_installed": true }
```



#### Write
            With MQTT on <code>$PREFIX/energy_manager/config<strong>_update</strong></code>


```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m '{ "contactor_installed": true }'
```

or abbreviated:

```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/config_update -m 'true'
```




        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_installed`<br/>bool</th>
    <td>
        Indicates whether a contactor is connected that can switch the controlled wallboxes between three-phase and single-phase operation. Input 4 is then automatically used for contactor monitoring.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/state` {#energy_manager_state_any}


Energy Manager state
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/state
```
        </TabItem>
    </Tabs>

```jsx
{
  "phases_switched": 1,
  "input3_state": false,
  "input4_state": false,
  "relay_state": false,
  "error_flags": 0,
  "config_error_flags": 0
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`phases_switched`<br/>int</th>
    <td>
        Phase switching state
        
        
        
        - **1** - One phase connected
        - **3** - Three phases connected
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input3_state`<br/>bool</th>
    <td>
        State of input 3
        
        
        
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input4_state`<br/>bool</th>
    <td>
        State of input 4
        
        
        
        - **true** - Input closed
        - **false** - Input open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`relay_state`<br/>bool</th>
    <td>
        State of the relay
        
        
        
        - **true** - Relay closed
        - **false** - Relay open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`error_flags`<br/>int</th>
    <td>
        Active error states of the Energy Manager. This is a bitmask, so any combination of error values can occur.
        
        
        
        - **0** - No error
        - **0x00000002** - No network connection (LAN/WLAN)
        - **0x00010000** - Contactor monitoring has triggered
        - **0x01000000** - Internal error, Bricklet not reachable
        - **0x02000000** - Internal error, SD card error
        - **0x80000000** - Invalid configuration, details in config_error_flags
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`config_error_flags`<br/>int</th>
    <td>
        Active configuration errors of the Energy Manager. This is a bitmask, so any combination of configuration errors can occur.
        
        
        
        - **0** - No error
        - **0x00000001** - Phase switching or contactor not configured
        - **0x00000002** - Maximum total current of wallboxes not configured
        - **0x00000004** - No wallboxes configured
        - **0x00000008** - Excess charging enabled but no electricity meter configured
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/low_level_state` {#energy_manager_low_level_state_any}


Low-level state of the Energy Manager
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/low_level_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/low_level_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "consecutive_bricklet_errors": 0,
  "contactor": false,
  "contactor_check_state": 1,
  "input_voltage": 11925,
  "led_rgb": [0, 0, 0],
  "uptime": 940868435
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`consecutive_bricklet_errors`<br/>int</th>
    <td>
        Number of consecutive internal communication errors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor`<br/>bool</th>
    <td>
        Contactor state set by the Energy Manager
        
        
        
        - **true** - Contactor closed
        - **false** - Contactor open
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`contactor_check_state`<br/>int</th>
    <td>
        Contactor check state
        
        
        
        - **0** - Contactor monitoring has triggered (contactor defective)
        - **1** - No contactor error known (contactor OK)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`input_voltage`<br/>int (<abbr title="Millivolt">mV</abbr>)</th>
    <td>
        Internal supply voltage in millivolts.
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`led_rgb`<br/>int[3]</th>
    <td>
        Status LED color
        
        
        
        - **[0]** - Red: 0 (off) to 255 (maximum intensity)
        - **[1]** - Green: 0 (off) to 255 (maximum intensity)
        - **[2]** - Blue: 0 (off) to 255 (maximum intensity)
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`uptime`<br/>int (<abbr title="Millisecond">ms</abbr>)</th>
    <td>
        Time since starting the Energy Manager Bricklet.<br/><br/>Attention: This time is measured directly via the processor clock. The accuracy is therefore only sufficient for time measurements in the range of minutes to a few hours. The time measurement overflows after approximately 50 days and starts again at 0.
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_state` {#energy_manager_sdcard_state_any}


Information about the inserted MicroSD card.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Read
```bash
curl http://$HOST/energy_manager/sdcard_state
```
        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Read
```bash
mosquitto_sub -v -C 1 -h $BROKER -t $PREFIX/energy_manager/sdcard_state
```
        </TabItem>
    </Tabs>

```jsx
{
  "sd_status": 0,
  "lfs_status": 0,
  "card_type": 12,
  "sector_count": 15759360,
  "sector_size": 512,
  "manufacturer_id": 116,
  "product_rev": 32,
  "product_name": "USDU1"
}
```


:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sd_status`<br/>int</th>
    <td>
        SD card status
        
        
        
        - **0** - OK
        - **1** - READ_BLOCK_TIMEOUT
        - **2** - WRITE_BLOCK_TIMEOUT
        - **3** - RESPONSE_TIMEOUT
        - **11** - ERROR_INIT_TYPE
        - **12** - ERROR_INIT_VER_OR_VOLTAGE
        - **13** - ERROR_INIT_ACMD41
        - **14** - ERROR_INIT_CMD58
        - **15** - ERROR_INIT_CMD0
        - **21** - ERROR_CID_START
        - **22** - ERROR_CID_CMD10
        - **31** - ERROR_CSD_START
        - **32** - ERROR_CSD_CMD9
        - **41** - ERROR_COUNT_TO_HIGH
        - **51** - ERROR_NO_CARD
        - **255** - ERROR_API_FAILURE
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`lfs_status`<br/>int</th>
    <td>
        Status of the file system (LittleFS) on the SD card
        
        
        
        - **0** - OK
        - **255** - ERROR_API_FAILURE
        - **256** - SD card is being formatted
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`card_type`<br/>int</th>
    <td>
        SD card type
        
        
        
        - **0** - No SD card found
        - **1** - MMC
        - **2** - SD
        - **4** - SDSC
        - **12** - SDHC/SDXC
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_count`<br/>int</th>
    <td>
        SD card size in sectors
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`sector_size`<br/>int</th>
    <td>
        Size of a sector
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`manufacturer_id`<br/>int</th>
    <td>
        Manufacturer ID
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_rev`<br/>int</th>
    <td>
        Product revision
    </td>
</tr>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`product_name`<br/>string</th>
    <td>
        Product name
    </td>
</tr>
    </tbody>
</table>

<br/><br/><br/>
## `energy_manager/sdcard_format` {#energy_manager_sdcard_format_any}


Formats the inserted SD card and thus deletes the energy balance history. <strong>Cannot be undone!</strong> A restart is automatically performed afterwards.
:::info[Example]
    <Tabs groupId="apiType" queryString className="hidden-tabs">
        <TabItem value="http" label="HTTP (curl)">
```bash
# $HOST e.g. warp-AbCd
```
#### Write
```bash
curl http://$HOST/energy_manager/sdcard_format -d '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
        <TabItem value="mqtt" label="MQTT (mosquitto)">
```bash
# $BROKER e.g. my_mosquitto.localdomain
# $PREFIX e.g. warp/AbCd
```
#### Write
```bash
mosquitto_pub -h $BROKER -t $PREFIX/energy_manager/sdcard_format -m '{ "do_i_know_what_i_am_doing": false }'
```



        </TabItem>
    </Tabs>
:::


<table>
    <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Meaning</th>
        </tr>
    </thead>
    <tbody>

<tr>
    <th scope="row" style={{whiteSpace: "nowrap"}}>`do_i_know_what_i_am_doing`<br/>bool</th>
    <td>
        Indicates whether the SD card should be formatted
        
        
        
        - **true** - Format SD card
        - **false** - Perform no action
    </td>
</tr>
    </tbody>
</table>
</TabItem>
</Tabs>

export const toc = [
    {
    "value": "energy_manager/config",
    "id": "energy_manager_config",
    "level": 2,
    "hardwareType": ["wem","wem2"]
},{
    "value": "energy_manager/state",
    "id": "energy_manager_state",
    "level": 2,
    "hardwareType": ["wem","wem2"]
},{
    "value": "energy_manager/low_level_state",
    "id": "energy_manager_low_level_state",
    "level": 2,
    "hardwareType": ["wem","wem2"]
},{
    "value": "energy_manager/sdcard_state",
    "id": "energy_manager_sdcard_state",
    "level": 2,
    "hardwareType": ["wem","wem2"]
},{
    "value": "energy_manager/sdcard_format",
    "id": "energy_manager_sdcard_format",
    "level": 2,
    "hardwareType": ["wem","wem2"]
},
];
