\documentclass[a4paper,10pt]{article}
\ifdefined\forprint
    \usepackage[width=21.6cm,height=30.3cm,center]{crop}
\fi
\usepackage[utf8]{inputenc}
\usepackage[margin=2cm,headheight=26pt,includeheadfoot]{geometry}

\usepackage[german]{babel}
\usepackage[german=quotes]{csquotes}

\usepackage{nameref}
\usepackage{microtype}
\usepackage{float}
\usepackage{siunitx}
\sisetup{
    locale = DE,
    binary-units,
    detect-all,
    per-mode = symbol %enables m/s instead of ms^-1
}
\AtBeginDocument{\DeclareSIUnit{\kWh}{kWh}}

\usepackage{hhline}
\usepackage{tabularx}
\usepackage{array}
\usepackage{calc}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{parskip}
\usepackage{booktabs}
\usepackage{textcomp}
\usepackage{afterpage}
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{48pt}
\renewcommand{\headrulewidth}{0pt}

\usepackage{xcolor,colortbl}
\usepackage{makecell}

\usepackage[symbol*]{footmisc}
\renewcommand{\thefootnote}{\fnsymbol{footnote}}
\renewcommand{\thempfootnote}{\fnsymbol{mpfootnote}}
\newcommand\todo[1]{\textcolor{red}{\huge TODO: #1}}
\usepackage{color}
\usepackage{enumitem}

\usepackage{pdfpages}

\usepackage{phonenumbers}

% Word-Stealth-Modus, kann aber kein Omega
%\usepackage[scaled]{helvet}

\usepackage[inline,nomargin]{fixme}
\fxsetup{
    author=,
    layout=inline,
    theme=color
}

\definecolor{fxnote}{rgb}{0.8000,0.0000,0.0000}
\colorlet{fxnotebg}{yellow}

\definecolor{boxgray}{rgb}{0.33,0.33,0.33}
\definecolor{covergray}{rgb}{0.333,0.333,0.325}
\usepackage{tcolorbox}
\title{}
\author{}

\renewcommand{\familydefault}{\sfdefault}

\newcommand{\hint}[1]{\begin{tcolorbox}[colback=boxgray,colframe=black,coltext=
white,title=Hinweis,left*=2mm,right*=2mm,boxsep=1mm,bottom=1mm,top=1mm]#1\end{tcolorbox}}

\newcommand{\gfx}[1]{\includegraphics[width=\linewidth]{#1}}

\newcommand*{\fullref}[1]{Abschnitt \hyperref[{#1}]{\ref*{#1}~\nameref*{#1}}}

\fancyhf{}
\fancyhead{\colorbox{boxgray}{
    \makebox[\dimexpr\linewidth-2\fboxsep - 2.17mm][l]{
        \includegraphics[height=1cm]{./img_warp3/resized/logo}\hfill\color{white}\Huge\raisebox{.5ex}{\thepage}
        }
    }
}

\usepackage{hyperref}
\usepackage{qrcode}

\appto\UrlNoBreaks{\do\.\do\:\do\/\do\_}

\newcommand\rurl[2]{%
  \href{#1}{\nolinkurl{#2}}%
}


\newcommand{\tdesc}[1]{\multicolumn{3}{l}{\footnotesize #1}}

\usepackage{hyphenat}

\hyphenation{Web-inter-face}
\hyphenation{auf-ge-zeich-net}

\begin{document}
\pagestyle{empty}
\begin{titlepage}
    \vspace*{-3.08cm}
    \makebox[\dimexpr\linewidth-2\fboxsep][c]{\includegraphics[width=0.6\textwidth]{./img_warp3/resized/logo}}
    \vfill
    \begin{center}
		\color{white}
        \Huge
        WARP3 Charger Betriebsanleitung\\\vspace{1cm}
        \large
        Version 1.2\\\vspace{0.25cm}
        \today
    \end{center}
    \vfill \gfx{./img_warp3/resized/front.png}
	\pagecolor{covergray}
\end{titlepage}
\newpage
\pagecolor{white}
\null
\newpage
\pagestyle{fancy}
\begin{multicols*}{2}
    \tableofcontents
    \newpage
    \section{Einführung}
    \subsection{Vorwort} Vielen Dank, dass du
    dich für einen WARP3 Charger von Tinkerforge entschieden hast!

    Mit dem WARP3 Charger
    erhältst du die dritte Generation der hochwertigen und langlebigen Wallbox,
    mit der du dein Elektrofahrzeug laden kannst.
    Die Wallbox ist \enquote{Made in Germany}, das heißt von uns in
	Deutschland entwickelt und gefertigt. Sie ist modular aufgebaut, sodass
    einzelne Komponenten einfach ausgetauscht werden können. Bei der Auswahl der
	Bauteile legen wir großen Wert auf eine hohe Qualität. Sowohl die Hardware als
    auch die Software sind Open Source. Die nachfolgende Betriebsanleitung gibt dir
    alle notwendigen Informationen zu Sicherheit, Montage, Installation, Betrieb
    und Wartung deiner Wallbox.

    \subsection{Varianten}
    Den WARP3 Charger bieten wir in drei Varianten an: Basic, Smart und Pro.
	Alle Varianten sind mit einer V4A-Edelstahlfrontblende versehen,
	die optional im Farbton DB703 pulverbeschichtet geliefert werden kann.

	\subsubsection*{WARP3 Charger Basic}
	\gfx{./img_warp3/resized/warp3_basic_open}

    Der WARP3 Charger Basic ist das einfachste Modell. Mit diesem kannst du dein
    Elektrofahrzeug nach DIN EN 61851‐1 Mode 3 laden.
    Fahrzeuge können an der Wallbox ein-, zwei- oder dreiphasig geladen werden
    (abhängig vom Fahrzeug). Jede Wallbox kann ein- oder dreiphasig
    angeschlossen werden und ist als \SI{11}{\kilo\watt}- und
    \SI{22}{\kilo\watt}-Variante erhältlich. Die \SI{11}{\kilo\watt}- und
    die \SI{22}{\kilo\watt}-Variante unterscheiden sich nur durch den
    Leitungsquerschnitt des Typ-2-Ladekabels der Wallbox. Der maximale Ladestrom
    kann über einen Konfigurationsschalter in der Wallbox bei der Installation durch eine Elektrofachkraft von \SI{6}{\ampere} bis \SI{16}{\ampere}
    (dreiphasig \SI{11}{\kilo\watt}) bzw. von \SI{6}{\ampere} bis \SI{32}{\ampere} (dreiphasig \SI{22}{\kilo\watt}) eingestellt werden.

    Nach dem Einstecken des Typ-2-Ladesteckers in
    dein Fahrzeug zeigt dir die RGB-LED auf der Frontblende der Wallbox den
    Ladezustand deines Fahrzeugs an. Im Inneren des LED-Rings befindet sich ein Taster.

	\subsubsection*{WARP3 Charger Smart}
	\gfx{./img_warp3/resized/warp3_smart_open}

    Der WARP3 Charger Smart ist im Vergleich zur Variante Basic zusätzlich
	mit einem WLAN- und LAN-fähigen Controller ausgestattet.
    Dieser kann als \nohyphens{Access} Point ein eigenes WLAN eröffnen oder in
    ein vorhandenes Netzwerk eingebunden werden. Alternativ ist ein Anschluss
    per LAN möglich. Dazu kann ein LAN-Kabel in die Wallbox geführt werden.

    Per WLAN oder LAN kannst du auf das Webinterface des WARP3 Chargers Smart
    zugreifen. Auf diesem kannst du den aktuellen Ladezustand einsehen und
    Einstellungen an der Wallbox vornehmen. Beispielsweise kannst du über das Webinterface
    das Ladeverhalten und die maximale Ladeleistung konfigurieren.

	Soll die Wallbox in andere Systeme integriert werden, so stehen die
	Schnittstellen MQTT, HTTP, Modbus TCP und OCPP zur Verfügung
	(siehe \fullref{interfaces}).

    Der WARP3 Charger Smart bietet dir die Möglichkeit, Ladevorgänge
    per NFC (RFID) freizuschalten. Über die Webseite kannst du dazu NFC-Tags
    anlernen und verwalten. Ladevorgänge können lokal auf der Wallbox
	aufgezeichnet werden. Die Wallbox ermöglicht es dir, ein Ladelogbuch der
	Ladevorgänge mit Zeitstempel, Dauer und der verwendeten Ladekarte
	als PDF- oder CSV-Datei herunterzuladen.

	Mehrere WARP3 Charger können sich einen Stromanschluss teilen.
	Das eingebaute Lastmanagement kann dabei den Gesamtstrom aller
	Wallboxen dynamisch begrenzen.

	Das integrierte Energiemanagement ermöglicht die Anbindung der Wallbox
	direkt an Photovoltaik-Wechselrichter oder Stromzähler und ermöglicht ein
	photovoltaik-geführtes Überschussladen. Die Wallbox kann dazu zwischen ein- und dreiphasigem Laden umschalten.
	Damit kann ein Elektrofahrzeug bereits mit einem Überschuss von \SI{1,4}{\kilo\watt} geladen werden
	(einphasige Ladung mit \SI{6}{\ampere} Ladestrom).

	Mittels Automatisierungsregeln kannst du deine eigenen Ideen umsetzen.
	Die Regeln basieren auf einer Bedingung und einer damit verknüpften
	Aktion. Zum Beispiel kannst du Ladezeiten definieren oder abhängig von
	der erkannten NFC-Karte oder einer empfangenen MQTT-Nachricht
	zwischen verschiedenen Lademodi wechseln.

	\subsubsection*{WARP3 Charger Pro}
	\gfx{./img_warp3/resized/warp3_pro_open}

    Der WARP3 Charger Pro bietet dir alle Funktionen der Variante Smart.
    Zusätzlich ist dieser mit einem MID-geeichten Stromzähler (EU-Messgeräterichtlinie 2014/32/EU)
    ausgestattet, der misst, wie viel Energie (\SI{}{\kWh}) geladen
    wurde. Die geladene Energie wird bei aktiviertem Ladelogbuch bei jedem
	Ladevorgang erfasst und ermöglicht somit zum Beispiel die Abrechnung von Ladevorgängen für
	Dienstwagen. Der auf der Hutschiene im WARP3 Charger Pro montierte Stromzähler des Herstellers Eltako ist ein MID-geeichtes deutsches Markenprodukt.

	\subsubsection*{Optionale Ausstattung}
    Alle Wallboxen werden mit einem fest angeschlossenen
    \SI{5}{\meter}- oder \SI{7,5}{\meter}-Ladekabel mit Typ-2-Stecker geliefert.
    In der Standardausführung werden alle WARP3 Charger ohne Anschlusskabel
    (Zuleitung zur Wallbox) ausgeliefert. In diesem Fall muss bei der Installation
    ein Anschlusskabel bereitgestellt und in der Wallbox angeschlossen werden.
    Die Einführung des Anschlusskabels kann entweder von der Unter- oder von
    der Rückseite der Wallbox erfolgen.

    Optional kannst du jede Wallbox mit einem bereits ab Werk
    installierten Anschlusskabel bestellen. Du hast zusätzlich die
    Möglichkeit, dieses mit einem CEE-Stecker ausstatten zu lassen.
    Für die optionalen Anschluss\-kabel verwenden wir folgende Leitungen und CEE-Stecker:

    \begin{description}[leftmargin=!,labelwidth=\widthof{\textbf{\SI{22}{\kilo\watt}}}]
        \item[\SI{11}{\kilo\watt}]Gummianschlussleitung H07RN-F 5G4
              (\SI{4}{\square\milli\meter}
              Querschnitt) + \SI{16}{\ampere}-CEE-Stecker
        \item[\SI{22}{\kilo\watt}]Gummianschlussleitung H07RN-F 5G6
              (\SI{6}{\square\milli\meter}
              Querschnitt) + \SI{32}{\ampere}-CEE-Stecker
    \end{description}

	\subsubsection*{Individuelle Gravur/Eigenes Logo}
	Du kannst deine Wallbox mit einer individuellen Gravur bestellen.
	In diesem Fall wird das standardmäßig auf die Frontblende gravierte WARP-Logo
	durch das gewünschte Logo ersetzt.

	\fxnote{Foto Gravur}

    \newpage
    \section{Sicherheitshinweise}
    Die Wallbox ist so konstruiert, dass ein sicherer Betrieb gewährleistet ist,
    wenn sie korrekt installiert wurde, in einem einwandfreien technischen Zustand
    ist und diese Betriebsanleitung befolgt wird. \hint{Die Wallbox darf nur von einer ausgewiesenen Elektrofachkraft installiert
        werden.}

    \subsection{Bestimmungsgemäße Verwendung}
    Mit dem WARP3 Charger können Elektrofahrzeuge gemäß DIN EN 61851-1 geladen
    werden. Für andere Anwendungen ist die Wallbox nicht geeignet. Eine Verwendung
    an Orten, an denen explosionsfähige oder brennbare Substanzen lagern, ist nicht
    zulässig. Jegliche Modifikation des Ladesystems sowie der Betrieb mit
    Verlängerungskabeln, Mehrfach-Steckdosen oder Ähnlichem ist nicht zulässig. Der
    Ladestecker ist vor Beschädigungen, Feuchtigkeit und Verschmutzungen zu
    schützen und darf nicht genutzt werden, wenn kein sicherer Betrieb
    gewährleistet werden kann. \hint{Mit einem beschädigten, verschmutzten oder feuchten Ladestecker darf kein Ladevorgang durchgeführt
        werden.}

    \subsection{Gerätestörung / Technischer Defekt}
    Sollte es Anzeichen für einen technischen Defekt geben, ist sofort die
    Stromversorgung der Wallbox durch Abschalten der Wallbox-Sicherung im Verteilerkasten zu trennen.
    In diesem Fall ist die Sicherung mit dem Hinweis zu versehen, dass sie nicht wieder eingeschaltet weden darf.
    Anschließend ist eine Elektrofachkraft zu informieren.

    \subsection{Schutzeinrichtungen der Wallbox}\label{dcerrorhint}
    Der AC-Fehlerstromschutz wird über den hausseitig verbauten
    Typ-A AC-Fehlerstromschutzschalter (RCCB) oder einem eigens dafür installierten
    Typ-A \SI{30}{\milli\ampere}-AC-Fehlerstromschutzschalter gewährleistet. Die Wallbox ist
    mit einer integrierten DC-Fehlerstromüberwachung ausgestattet.
    Ein DC-Fehlerstrom $\geq \SI{6}{\milli\ampere}$ wird von der Wallbox erkannt und die Verbindung zum Fahrzeug sofort
    unterbrochen (Schütze schalten ab). Die Wallbox befindet sich dann in einem
    Fehlerzustand und kann nur durch Aus- und Einschalten der
    Stromversorgung oder über das Webinterface zurückgesetzt werden.
    \hint{Tritt ein DC-Fehlerstrom auf, ist unbedingt dessen Ursache zu
    ermitteln! Ein DC-Fehlerstrom kann den vorgeschalteten Fehlerstromschutzschalter
    \enquote{erblinden} lassen, so dass dann auch AC-Fehlerströme
    nicht mehr korrekt erkannt werden!}

    Darüber hinaus bietet die Wallbox weitere Schutzeinrichtungen: Dazu zählt eine
    permanente Erdungsüberwachung (PE). Ist die Erdung unterbrochen, so geht die
    Wallbox in einen Fehlerzustand. Außerdem prüft die Wallbox bei jedem
    Schaltvorgang, ob die verbauten Schütze korrekt schalten. Sollte ein
    Schütz nicht mehr korrekt schalten, geht die Wallbox ebenfalls in einen Fehlerzustand.
    Fehler können wie im \fullref{fehlerbehebung} beschrieben diagnostiziert werden.

    \newpage
    \section{Montage und Installation}
    \subsection{Montage}
    \subsubsection{Lieferumfang}
    Im Lieferumfang der Wallbox befinden sich:
    \begin{itemize}
        \item vormontierte Wallbox inkl. Deckel
        \item DIN-A4-Umschlag mit:
        \begin{itemize}
            \item dieser Betriebsanleitung
            \item Testprotokoll der Wallbox
            \item Bohrschablone
        \end{itemize}
    \end{itemize}
    Bei den Varianten Smart und Pro zusätzlich:
    \begin{itemize}
        \item drei NFC-Karten
    \end{itemize}


    \subsubsection{Montageort}
    Nach Möglichkeit sollte die Wallbox vor Witterungseinflüssen geschützt
    installiert werden. Direkte Sonneneinstrahlung ist zu vermeiden, um ein
    unnötiges Aufheizen der Wallbox zu verhindern. Auf eine ausreichende Belüftung
    ist zu achten. Die Staubschutzkappe des Typ-2-Steckers sollte nicht aufgesteckt
    werden, wenn sich diese durch Regen o.ä. mit Wasser füllen könnte. In diesem Fall
    droht eine Korrosion der Kontakte.

    \subsubsection{Wandmontage}\label{wandmontage}
    Zur Montage der Wallbox muss der Deckel entfernt werden. Dazu müssen die
    vier Kreuzschlitzschrauben (rot) gelöst werden.
    Nach dem Lösen der Schrauben kann dieser von der Wallbox heruntergenommen
    werden.

    \gfx{./img_warp3/resized/warp_screw_points_ready}


    \hint{Der Taster im Deckel ist über ein Anschlusskabel verbunden und muss
        durch Drücken des Rasthebels (blau) vom Kabel gelöst werden.}

    \gfx{./img_warp3/resized/warp3_frontLEDcable_arrow.jpg}

    Zusätzlich muss der Erdungsstecker (grün) von der Front\-blende abgesteckt werden.
    Erst danach kann der Deckel vollständig zur Seite gelegt werden.

    Nach dem Entfernen des Deckels kann das Gehäuse an der Wand montiert werden. Zum
    Bohren der Befestigungslöcher kann die mitgelieferte Bohrschablone genutzt
    werden. Bei der Montage ist auf einen ausreichend stabilen Untergrund zu
    achten.

    Wir empfehlen zur Montage den Einsatz von $\SI{5}{\milli\meter}$- oder
    $\SI{6}{\milli\meter}$-Schrauben. Die Schraubenlänge ist abhängig vom
    Untergrund. Der Schraubenkopfdurchmesser darf nicht mehr als
    $\SI{11}{\milli\meter}$ betragen, da ansonsten die Schraube nicht durch die
    entsprechende Öffnung im Gehäuse passt. Bei einer Montage auf einer Steinwand
    können beispielsweise 5$\times\SI{80}{\milli\meter}$-Holzschrauben
    mit 8$\times\SI{50}{\milli\meter}$-Dübeln verwendet werden.

    \subsubsection{Anforderungen an die Elektroinstallation}
    Die Wahl des Leitungsquerschnitts und der Lei\-tungs\-ab\-sicher\-ung der
    Wallbox-Zuleitung muss in Übereinstimmung mit den nationalen Vorschriften
    erfolgen. Üblicherweise erfolgt der Anschluss der Wallbox dreiphasig.
    Dafür sollte ein dreiphasiger Leitungsschutzschalter mit C-Charakteristik
    verwendet werden. Bei einem einphasigen Betrieb der Wallbox ist
    dementsprechend ein einphasiger Leitungsschutzschalter einzusetzen.
    Die Wallbox verfügt über eine interne DC-Fehlerstromerkennung, welche
    bei einem DC-Fehlerstrom $\geq \SI{6}{\milli\ampere}$ den Ladevorgang
    unterbricht. Daher ist nur ein vorgeschalteter Typ-A \SI{30}{\milli\ampere}-AC-Fehlerstromschutzschalter (RCCB)
    notwendig.
    Die Wallbox darf nur in einem TN~/~TT-Netz angeschlossen werden.

    \subsection{Elektrischer Anschluss}
    \hint{Die in diesem Abschnitt beschriebenen Arbeiten dürfen nur von einer ausgewiesenen
        Elektrofachkraft durchgeführt werden.}

    Nachdem die Wallbox montiert wurde, kann sie nun angeschlossen werden. Dazu
    muss der Deckel (siehe \fullref{wandmontage}) entfernt werden.

    \subsubsection{Anschluss der Zuleitung}
    \gfx{./img_warp3/resized/warp_cable_cut_ready}

    Die Zuleitung sollte für alle Varianten wie auf dem Foto oben abgebildet
    angefertigt werden. Wir empfehlen, das Kabel dafür auf einer Länge von
	mindestens \SI{130}{\milli\meter} abzumanteln. Für die Klemmen wird eine
    Abisolierlänge von 10 bis \SI{12}{\milli\meter} vorgegeben.

    Die Zuleitung wird am internen Klemmenblock
    angeschlossen. Um bei starren Leitern maximalen Bewegungsspielraum zu bieten,
    werden die Adern in einer kleinen Schlaufe über den Klemmenblock geführt
	und an den freien Federklemmplätzen angeschlossen. Die Adern werden anhand der Reihenfolge und
    Klemmenbeschriftungen in die Klemmen gesteckt.

    \gfx{./img_warp3/resized/warp3_smart_open_connected}

    Als Letztes muss die Kabelverschraubung festgezogen werden. Die Verschraubung
    hat einen Klemmbereich von \SI{11}{\milli\meter} bis \SI{22}{\milli\meter} und soll laut Hersteller mit
    \SI{10}{\newton{}\meter} angezogen werden.

    Der korrekte Sitz der Adern und die Phasenzugehörigkeit sind nach der
    Installation zu prüfen! Alle Verschraubungen innerhalb der Wallbox sind nachzuziehen.
    Als Nächstes muss der maximale Ladestrom eingestellt werden, siehe
	\fullref{ladestrom_schalter}.

    \subsubsection{Kabeleinführung von der Rückseite}
    Die Kabeleinführung des WARP3 Chargers von der Unterseite
    (Auslieferungszustand) kann umgebaut werden, so dass eine Kabeleinführung von der
    Rückseite erfolgt. Dazu müssen die Kabeleinführung (M32) für die Zuleitung und die
    Kabeleinführung für das Netzwerkkabel vom Wallbox-Gehäuse abgeschraubt
    werden. Die Bohrungen in der Rückseite der Wallbox sind im
    Auslieferungszustand von innen mit Blindstopfen verschlossen.
    Diese müssen entfernt und in die nun offenen Bohrungen an der Unterseite
    eingeschraubt werden. Die Kabeleinführungen werden anschließend von
    der Rückseite in das Wallbox-Gehäuse eingeschraubt.

    \gfx{./img_warp3/resized/warp3_back.jpg}

    \vspace{-0.01cm}

    \subsubsection{Variante mit werkseitig angeschlossener Zuleitung}
    Wird die Wallbox mit einer ab Werk vorinstallierten Zuleitung bestellt, so
    muss diese außerhalb der Wallbox verbunden werden. Die Farben sind nach DIN belegt und wie
    folgt zugeordnet: L1~braun, L2~schwarz, L3~grau, N~blau, PE~gelb/grün.

    Der korrekte Sitz der Adern und die Phasenzugehörigkeit sind nach der
    Installation zu prüfen!
    Danach muss der maximale Ladestrom eingestellt werden, siehe
	\fullref{ladestrom_schalter}.

    \subsubsection{Einphasiger Betrieb}
    Alle Wallboxen können auch einphasig angeschlossen und betrieben werden.
    Dazu ist unbedingt die Phase L1 anzuschließen, da diese ebenfalls zur
    Stromversorgung der Wallbox genutzt wird. L2 und L3 werden von der Wallbox
    nur durchgeschaltet und können dementsprechend unangeschlossen bleiben.
    \hint{Ein WARP3 Charger Smart oder Pro sollte im Webinterface auf den
    einphasigen Betrieb konfiguriert werden.}

    \subsubsection{Einstellen des Ladestroms}\label{ladestrom_schalter}
    Der maximal erlaubte Ladestrom muss abhängig von der hausseitigen
    Leitungsabsicherung eingestellt werden. Der Ladestrom darf nicht höher gewählt
    werden, als es die Zuleitung bzw. Leitungsabsicherung zulässt.

    Zum Einstellen des Ladestroms muss der Deckel (siehe \fullref{wandmontage})
    geöffnet werden. Über vier DIP-Schalter rechts auf dem Ladecontroller (EVSE) wird der
    maximale Ladestrom wie folgt eingestellt (maximal zulässiger Ladestrom in grau):

    \gfx{./img_warp3/resized/warp3_switch_location.jpg}

    Die verschiedenen Schalterstellungen sind im nachfolgenden Foto dokumentiert.
    Im Werkszustand sind die Schalter so eingestellt, dass die Wallbox inaktiv
	ist (\enquote{ungültig}).
	Als Beispiel ist in der zweiten Zeile Schalter 1 auf \enquote{ON} und die Schalter 2, 3 und 4 auf \enquote{OFF} gestellt.
    Damit wird bei einem dreiphasigen
    Betrieb eine maximale Ladeleistung von ca. \SI{4}{\kilo\watt} (3$\times\SI{6}{\ampere}$) vorgegeben.
    Wird die Wallbox nur einphasig angeschlossen, können vom Fahrzeug maximal
    \SI{1,4}{\kilo\watt} (1$\times\SI{6}{\ampere}$) über die Wallbox bezogen werden.

    \gfx{./img_warp3/resized/warp3_switches.jpg}

    \hint{Die Schalterstellung und der damit verbundene maximale Ladestrom dürfen nach der
          Installation nur von einer ausgewiesenen Elektrofachkraft unter
          Berücksichtigung der genannten Bedingungen geändert werden!}

    \subsubsection{LAN- / RJ45-Kabel anfertigen}\label{ethernet} \fxnote{Alle / benutzungen entweder mit oder ohne Leerzeichen}

    Um den WARP3 Charger mittels LAN anzubinden, muss ein LAN- / RJ45-Kabel
    angefertigt werden. Das RJ45-Kabel kann mittels einer
    Kabeldurchführung in die Wallbox geführt werden. Auf dem Ladecontroller
	(rechts in der Wallbox) befindet sich eine RJ45-Buchse, an der das
	eingeführte Kabel eingesteckt werden kann. Wir empfehlen, das Kabel
	in einem Bogen links über den Klemmblock zu führen.
	Es können auch größere, zum Beispiel werkzeuglose oder RJ45-Stecker
	mit einem LSA-Anschluss, genutzt werden.

    \gfx{./img_warp3/resized/warp3_pro_open_highlighted_LAN.jpg} % Ethernetkabel

    \subsection{Steuerbare Verbrauchseinrichtung nach \S14a EnWG}\label{s14enwg}
    Wallboxen gehören nach \S14a EnWG zu sogenannten Steuerbaren
    Verbrauchseinrichtungen, da deren Anschlussleistung mehr als \SI{4,2}{\kilo\watt} beträgt.

    WARP3 Charger können auf verschiedenen Arten vom Netzbetreiber gesteuert werden.
    Welche Möglichkeit genutzt werden kann, hängt von den Vorgaben des örtlichen Netzbetreibers ab.

    \paragraph*{Schnittstellen (OCPP, Modbus TCP, HTTP, MQTT)}
    Generell kann die Ladeleistung der Wallbox über alle implementierten Schnittstellen gesteuert werden, siehe \fullref{interfaces}.
    Netzbetreiber setzen zur Steuerung typischerweise OCPP oder Modbus TCP ein.

    \paragraph*{Rundsteuerempfänger/Steuerbox}
    Am Abschalteingang innerhalb der Wallbox kann ein potentialfreier Kontakt (spannungsfreier Schaltkontakt)
    angeschlossen werden. Dazu muss eine Steuerleitung vom Rundsteuerempfänger
    oder der Steuerbox des Netzbetreibers in die Wallbox gelegt und am
	Ladecontroller angeschlossen werden (siehe \fullref{abschalteingang}).

	In der Standardkonfiguration der Wallbox wird auf \SI{4200}{\watt} limitiert, wenn der Abschalteingang geschlossen ist. Dieses Verhalten kann im Webinterface unter \texttt{Wallbox} $\rightarrow$ \texttt{Ladeeinstellungen} angepasst werden.

    \paragraph*{Rundsteuerempfänger/Steuerbox (mittels WARP Energy Manager)}
    Anstatt eine Steuerleitung in die Wallbox zu legen, besteht auch die
    Möglichkeit, die Eingänge des WARP Energy Managers mit dem Rundsteuerempfänger oder der
    Steuerbox zu verbinden. Der WARP Energy Manager steuert dann die
    Leistung der Wallbox(en) über das Netzwerk (LAN/WLAN). Eine gesonderte
    Steuerleitung entfällt.
    Der WARP Energy Manager muss hierfür als Lastmanager der betreffenden Wallbox(en) konfiguriert werden.
    Anschließend muss in \texttt{Energiemanager} $\rightarrow$ \texttt{Automatisierung}
    folgende Regel angelegt werden:

    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
        \item[Bedingung]\ \\ \enquote{Eingang 3 geschaltet} (bzw. 4) $\rightarrow$ \enquote{auf geschlossen}
        \item[Aktion]\ \\\enquote{Begrenze maximalen Gesamtstrom}
        \item[Maximaler Gesamtstrom]\ \\ \SI{6}{\ampere} (bzw. \SI{18}{\ampere} bei einphasigem Anschluss)
    \end{description}
    \vspace{-0.2cm}

    \subsection{Prüfungen}\label{tests}
    Im Werk wurde jede Wallbox einzeln nach IEC~60364-6 sowie den entsprechenden gültigen
    nationalen Vorschriften geprüft, das jeweilige Messprotokoll liegt bei.
    Vor der ersten Inbetriebnahme ist dennoch eine Prüfung der Gesamtinstallation
    nach denselben Vorschriften notwendig.

    Bei der Messung des Isolationswiderstands wird für L1 ein niedrigerer Wert
    gemessen (ca. \SI{1}{\mega\ohm}), da der verbaute Ladecontroller über einen Optokoppler mit
    \SI{1}{\mega\ohm} Vorwiderstand zwischen L1 und
    PE verfügt (Erdungsüberwachung). Wird während der Messung ein EVSE-Adapter verwendet,
    kann es aufgrund der genannten Überwachungsschaltung in Wechselwirkung mit dem EVSE-Adapter zu Fehlmessungen
    auf L2, L3 und N (gemessen gegen PE) kommen. Ist dies der Fall, so muss die Isolationsmessung
    ohne EVSE-Adapter direkt am Typ-2-Stecker durchgeführt werden.

    Die interne DC-Fehlerstromerkennung wird von der Wallbox automatisch getestet.

    Nachdem die Wallbox installiert
    und die korrekte elektrische Installation überprüft wurde, kann die Wallbox in
    Betrieb genommen werden.
    Im ersten Schritt wird die Stromversorgung zur Wallbox eingeschaltet. Die
    LED blinkt anschließend sehr schnell magenta. Die Wallbox führt
    in den ersten drei Sekunden eine Kalibrierung der
    DC-Fehlerstromerkennung durch. Nach Abschluss dieser Kalibrierung
    leuchtet die LED dauerhaft. Die Wallbox ist nun betriebsbereit. Sollte die LED jetzt
    nicht permanent blau leuchten, wurde ein Fehler erkannt (siehe \fullref{fehlerbehebung}).

    Als Nächstes kann ein Elektrofahrzeug zum Laden mit der Wallbox verbunden
    werden. Dazu wird die Schutzkappe vom Ladestecker entfernt und der Stecker
	wird in die Ladebuchse des Elektrofahrzeugs gesteckt. Nach wenigen Sekunden sollte hörbar
    ein Schütz in der Wallbox schalten und das Fahrzeug den Beginn
    des Ladevorgangs anzeigen. Während des Ladevorgangs \enquote{atmet} die LED blau.
    Ist der Ladevorgang beendet, so leuchtet sie permanent. Nach ca.
    15 Minuten Inaktivität wird die LED abgeschaltet.

	Mittels des Fronttasters kann ein Ladevorgang sofort unterbrochen werden (Standardeinstellung). Alternativ kann das Ladekabel vom Elektrofahrzeug entriegelt werden,
    wodurch der Ladevorgang ebenfalls unterbrochen wird. Um den Ladevorgang erneut
    zu starten, muss in beiden Fällen die Verbindung zum Fahrzeug getrennt und
    anschließend erneut hergestellt (Kabel aus- und wieder einstecken) oder der Ladevorgang über das Webinterface neugestartet werden.

    \vspace{-0.1cm}
    \subsection{Bedienelemente}\label{lockswitch}
	Die im Fronttaster verbaute RGB-LED kann je nach Betriebszustand
	verschiedene Farben annehmen.
	Das Verhalten bei einem Tastendruck kann im Webinterface der Wallbox konfiguriert werden.

    Zusätzlich verfügen die Wallbox-Varianten Smart und Pro über ein NFC-Modul,
	mit dem eine Ladefreigabe z.B. per Chipkarte möglich ist. Eine
    genaue Beschreibung findet sich im \fullref{NFC}.

    \vspace{-0.1cm}
	\subsection{EVSE Klemmblock / Abschalteingang}\label{abschalteingang}
	Rechts in der Wallbox befindet sich der Ladecontroller. Neben dem DIP-Schalter,
	an dem der maximale Ladestrom eingestellt wird, befindet sich ein
	Klemmblock. An diesem ist die CP-Leitung des Typ-2-Ladekabels angeschlossen,
	sowie der PP-Widerstand, mit dem der maximale Strom des Ladekabels
	definiert wird.

	Zusätzlich befindet sich hier der Abschalteingang (\enquote{EN}).
	Dieser Eingang muss mit PE kurzgeschlossen werden, um aktiv zu sein. PE ist
	mehrfach auf dem Klemmblock vorhanden. Die Interpretation des Abschalteingangs kann unter \texttt{Wallbox} $\rightarrow$ \texttt{Ladeeinstellungen} unter dem Punkt \enquote{Abschalteingang} definiert werden.

    \gfx{./img_warp3/resized/evse_clamp.jpg}

    \newpage
    \section{Erste Schritte}\label{setup}

    Beim WARP3 Charger Basic können nach der elektrischen Installation
    keine weiteren Einstellungen vorgenommen werden. Die nachfolgende
    Beschreibung bezieht sich daher nur auf die Smart- bzw. Pro-Variante des WARP
    Chargers.

    Um weitere Einstellungen durchführen zu können, muss zuerst eine Verbindung
    zur Wallbox hergestellt werden, damit diese über das Webinterface mittels
	Webbrowser konfiguriert werden kann.

    \subsection{Schritt 1: Verbindung zur Wallbox herstellen}

    \paragraph{Option 1: WLAN}
    Im Werkszustand öffnet die Wallbox einen WLAN-Access-Point. Über diesen kann
    die Konfiguration der Wallbox vorgenommen werden, indem auf das
    Webinterface der Wallbox zugegriffen wird.

    Die Zugangsdaten des Access-Points finden sich auf dem WLAN-Zugangsdaten-Aufkleber
    auf der Rückseite dieser Anleitung. Es kann entweder der QR-Code des Aufklebers,
    der das WLAN automatisch konfiguriert, oder die SSID und Passphrase verwendet werden.
    Die meisten Kamera-Apps von Smartphones unterstützen das Auslesen des
    QR-Codes und das automatische Verbinden mit dem WLAN. Viele Smartphones
    erkennen, dass über den Access-Point der Wallbox kein Zugriff auf das
    Internet möglich ist. Deshalb muss gegebenenfalls die mobile Datenverbindung (z.B. LTE) deaktiviert werden, oder eine Nachfrage, ob die Verbindung zum Access-Point der Wallbox getrennt werden soll, verneint werden.

    \begin{minipage}{0.35\textwidth}
        Wenn die Verbindung mit dem Access-Point der Wallbox hergestellt ist, kann das Webinterface
        unter \url{http://10.0.0.1} über einen beliebigen Browser erreicht werden.
        Alternativ kann dazu der nebenstehende QR-Code gescannt werden.
    \end{minipage}\hfill
    \begin{minipage}{0.12\textwidth}
        \begin{flushright}
            \qrcode{http://10.0.0.1}
        \end{flushright}
    \end{minipage}

    \paragraph{Option 2: LAN}
    Wenn ein LAN-Kabel eingesteckt wird verbindet sich die
    Wallbox automatisch mit einem
    kabelgebundenen Netzwerk, (IP-Address-Bezug
    per DHCP). Die Wallbox kann dann entweder über die zugewiesene IP
    Adresse (\url{http://[IP-der-Wallbox]}, z.B. \url{http://192.168.0.42})
    oder den Hostnamen der Wallbox (\url{http://[hostname]}, z.B.
    \url{http://warp3-ABC}) erreicht werden.

    Der Hostname der Wallbox ist identisch zur SSID des WLAN-Access-Points. Der Hostnamen findet sich
    auf dem WLAN-Zugangsdaten-Aufkleber auf der Rückseite dieser Anleitung.

    Kann die per DHCP an die Wallbox vergebene IP nicht ermittelt werden, so kann der
    zuvor genannte Zugriff auf das Webinterface über den WLAN-Access-Point genutzt
    werden, um die IP.Adresse der LAN.Schnittstelle zu ermitteln (\texttt{Status},
    Abschnitt \enquote{LAN-Verbindung}).

    \paragraph{Konfiguration mittels Webinterface}
    Ist die Wallbox per WLAN (Accesspoint) oder LAN mittels Browser erreichbar,
    kann die weitere Konfiguration durchgeführt werden.
    Das Webinterface ist im \fullref{webinterface} vollständig beschrieben.

    \subsection{Schritt 2: Integration in das eigene Netzwerk}
    In den allermeisten Fällen soll die Wallbox in das eigene Netzwerk
    integriert werden. Dazu müssen die Netzwerkeinstellungen der Wallbox
    angepasst werden, siehe \fullref{network}.

    \subsection{Schritt 3: Weitere Optionen}
    Generell empfehlen wir, nach der Installation ein Update der Wallbox-Firmware durchzuführen,
    um die neusten Funktionen und ggf. Bugfixes zu erhalten. Wie ein
    Firmware-Update durchgeführt wird, ist im \fullref{firmware-update}
    beschrieben.

    Weitere Einstellungen hängen vom Verwendungszweck der Wallbox ab. Teilen
    sich mehrere Wallboxen einen Stromanschluss, kann die Konfiguration eines
    Lastmanagements notwendig sein (siehe \fullref{charge_manager}).

    Eine Ladefreigabe mittels NFC-Tag, die Zuordnung von Ladevorgängen zu Nutzern bzw. Fahrzeugen
    (Ladelogbuch) oder ein Passwort für das Webinterfaces können in der Benutzerverwaltung konfiguriert werden.
	Siehe dazu \fullref{user_management}.
    Bei einer Ersteinrichtung empfehlen wir, zuerst die Benutzer anzulegen und
    anschließend den Benutzern NFC-Tags zuzuordnen. Siehe dazu \fullref{NFC}.

    \newpage

    \section{Webinterface}\label{webinterface}
    Das Webinterface der Wallbox ist nur bei den Varianten Smart und Pro verfügbar.
    Über das Webinterface kann unter anderem das Laden gesteuert und überwacht werden.
    Es können diverse Einstellungen vorgenommen werden, die nachfolgend
    erläutert werden.

    Beim Zugriff auf das Webinterface der Wallbox wird die \texttt{Status}seite angezeigt.
    Links befindet sich die Menüleiste, über die zu anderen Unterseiten gewechselt werden kann.

    Auf mobilen Endgeräten wird die Menüleiste unter einem Menü-Symbol oben rechts
    im grauen Balken neben dem WARP Logo versteckt.

    \gfx{./img_warp3/resized/web_status}

    \subsection{Status (Startseite)}

    Die Startseite des Webinterfaces zeigt kompakt den aktuellen Zustand der
    Wallbox sowie Ladezeit und -strom an und erlaubt es, den Ladevorgang zu steuern.
    Ladevorgänge können hier manuell gestartet oder gestoppt werden.
    Außerdem werden der aktuell laufende Ladevorgang, die letzten drei
    Ladevorgänge sowie der Status weiterer Funktionen angezeigt.
    In der Variante Pro mit verbautem Stromzähler zusätzlich der Ladeverlauf
    über die letzten 48 Stunden und die aktuelle Leistungsaufnahme gezeigt.

    Bestimmte Einträge (z.B. OCPP-Verbindung) werden auf der Statusseite nur anzeigt, wenn die entsprechende
    Funktionalität konfiguriert ist.

    Der \textbf{Ladestatus} zeigt, ob aktuell ein
    Fahrzeug mit der Wallbox verbunden ist und ob dieses geladen wird.

    Die \textbf{Ladesteuerung} ermöglicht es, manuell einen Ladevorgang zu
    starten oder zu stoppen. Wenn die manuelle Ladefreigabe (siehe \fullref{evse-settings}) aktiviert ist, wird die
    Wallbox niemals einen Ladevorgang automatisch starten.
    Ist die manuelle Ladefreigabe deaktiviert,
    startet der Ladevorgang automatisch, sobald ein Fahrzeug
    angeschlossen wird und keine weiteren Freigabemechanismen (z.B. NFC) den
    direkten Start verhindern.

    Der \textbf{Konfigurierte Ladestrom} bietet eine einfache Möglichkeit, den
	Ladestrom einzustellen, mit dem ein Fahrzeug maximal geladen wird.
	Minimal können \SI{6}{\ampere} eingestellt werden. Der maximale Wert, der eingestellt werden kann, hängt vom Anschluss sowie der Konfiguration der Wallbox ab.

    Der \textbf{Erlaubte Ladestrom} gibt an, welcher Ladestrom derzeit einem Fahrzeug erlaubt
    wird. Der Ladestrom ist das Minimum aller begrenzenden Faktoren wie
    beispielsweise dem Anschluss der Wallbox, eventuellen Grenzen pro konfiguriertem Benutzer,
    dem Lastmanagement und auch dem oben gesetzten konfigurierten Ladestrom.

    Der \textbf{Lademodus} legt fest, welchen Lademodus das PV-Überschussladen verwenden soll. Die Lademodi werden im \fullref{pv_charge} erläutert.

	\textbf{Phasenumschaltung} zeigt an, ob die Wallbox dem Fahrzeug eine
	ein- oder dreiphasige Ladung anbietet. Ist kein PV-Überschussladen
	aktiviert, kann mittels der Buttons
	zwischen ein- und dreiphasigem Laden umgeschaltet werden. Mit dieser Einstellung kann die Ladeleistung zwischen ca. \SI{1,4}{\kilo\watt}
	(einphasig \SI{6}{\ampere}) und ca. \SI{22}{\kilo\watt}
	(dreiphasig \SI{32}{\ampere}) gewählt werden.

    \textbf{Zeitlimit} gibt die noch zur Verfügung stehende Ladezeit an.
	Die Ladezeit kann hier überschrieben werden. Ist kein Ladevorgang
	aktiv, gilt die Ladezeit für den nächsten Ladevorgang. Nach Ablauf des
	Zeitlimits wird der Ladevorgang unterbrochen. Wird während eines Ladevorgangs ein Zeitlimit
	eingestellt, gilt dieses für den laufenden Ladevorgang.
	Das eingegebene Zeitlimit gilt also auch hier ab dem Beginn des Ladevorgangs.

    \textbf{Energielimit} kann nur beim WARP3 Charger Pro eingestellt werden und gibt die zur Verfügung stehende Restenergie für den
    Ladevorgang an. Diese Einstellung ist analog zum Zeitlimit zu verwenden.

    \textbf{Ladeverlauf} und \textbf{Leistung} sind nur in der Variante Pro
    vorhanden. Hier werden die aktuelle Leistungsaufnahme sowie deren Verlauf in den letzen bis zu 48 Stunden in einem Diagramm angezeigt.

    \textbf{Letzte Ladevorgänge} zeigt den Verlauf der zuletzt durchgeführten
	Ladevorgänge an. Je nach Variante und Konfiguration der Wallbox können Ladevorgänge Benutzern
	zugeordnet werden, sowie die geladene Energie pro Ladevorgang aufgezeichnet werden. Falls gerade ein Ladevorgang läuft,
	wird über den letzten Ladevorgängen zusätzlich der \textbf{aktuelle Ladevorgang} angezeigt.

    \textbf{Lastmanager} zeigt den aktuellen Zustand des Lastmanagers an, falls diese Wallbox
    andere Wallboxen steuert. Hier kann der \textbf{Verfügbare Strom} des Lastmanagement-Verbunds
    eingestellt werden, wenn kein PV-Überschussladen verwendet wird, und der Zustand der \textbf{kontrollierten Wallboxen} wird angezeigt.


    Der \textbf{WLAN-Access-Point}-Status bildet den Status des Access-Points ab.
    \enquote{Deaktiviert} beziehungsweise \enquote{Aktiviert} zeigt den Zustand, wenn der Access-Point nicht
    nur als Fallback für die WLAN-Verbindung verwendet wird. Falls der Status \enquote{Fallback inaktiv} ist,
    war die WLAN-Verbindung bzw. LAN-Verbindung erfolgreich und der Access-Point wurde deshalb deaktiviert.
    Beim Status \enquote{Fallback aktiv} ist der Aufbau der Netzwerk-Verbindung fehlgeschlagen und der
    Access-Point deshalb aktiviert.

    \textbf{WLAN-Verbindung} zeigt an, ob eine Verbindung konfiguriert ist, ob sie erfolgreich aufgebaut wurde und
    unter welcher IP-Adresse die Wallbox per WLAN erreichbar ist. Ein Symbol
    zeigt die Signalstärke des WLANs an.

    \textbf{LAN-Verbindung} zeigt analog an, ob eine LAN-Verbindung besteht und unter welcher IP-Adresse die Wallbox erreichbar ist.

    \textbf{MQTT-Verbindung} zeigt den aktuellen Status der MQTT-Verbindung
    zum konfigurierten Broker an.

    \textbf{OCPP-Verbindung} und der \textbf{OCPP-Status} zeigen den aktuellen Status der Verbindung zum konfigurierten OCPP-Server an.
    Darunter wird textuell der Zustand des WARP3 Chargers aus Sicht des Servers angezeigt.

    \textbf{Zeitsynchronisierung} zeigt an, ob Datum und Uhrzeit per Netzwerk-Zeitsynchronisierung (NTP) aktualisiert werden konnten.

    \textbf{WireGuard-Verbindung} zeigt an, ob die konfigurierte WireGuard-VPN-Verbindung aufgebaut werden konnte. Hierfür ist eine bestehende Zeitsynchronisierung eine zwingende Voraussetzung.

    \subsection{Wallbox}
    Die \texttt{Wallbox}-Gruppe enthält Unterseiten mit Einstellungen des
	Ladecontrollers, Ladestatus, Ladetracker und Automatisierung.

    \subsubsection{Einstellungen}\label{evse-settings}

    Auf dieser Unterseite können verschiedene Einstellungen des Ladecontrollers verändert werden:

    \gfx{./img_warp3/resized/web_evse_settings}

    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
     \item[Manuelle Ladefreigabe] Wenn die manuelle Ladefreigabe aktiviert wird, wird ein Ladevorgang niemals automatisch begonnen. Jeder Ladevorgang muss über das Webinterface, die API oder (je nach Tastereinstellung) den Taster gestartet werden. Die manuelle Ladefreigabe blockiert \textit{zusätzlich} zu eventuell anderen aktiven Ladestromgrenzen. Das heißt, dass sie \textit{nicht} aktiviert werden muss, wenn Ladevorgänge beispielsweise mit der Benutzerfreigabe per NFC-Tag, oder der Steuerung per OCPP kontrolliert werden.
     \item[Externe Steuerung] Wenn die externe Steuerung erlaubt ist, darf eine externe Steuerungssoftware, beispielsweise
     EVCC (\rurl{https://evcc.io}{evcc.io}), den WARP3 Charger steuern. Eine Steuerungssoftware kann auch selbst entwickelt werden, hierzu stellen
     wir unter \rurl{https://warp-charger.com/api.html}{warp-charger.com/api.html} eine detaillierte API-Dokumentation zur Verfügung.
     \item[Status-LED-Steuerung] Ermöglicht die Steuerung der Front-LED mit einer externen Steuerung oder über die API, z.B. für eine externe NFC-Freigabe.
     \item[Boost-Modus] Die Ladeelektronik mancher Fahrzeuge interpretiert einen vom WARP3 Charger vorgeschriebenen Ladestrom zu niedrig. Der Boost-Modus versucht, diesen Effekt auszugleichen, indem ein leicht höherer Ladestrom kommuniziert wird.
     \item[Zählerüberwachung] Im WARP3 Charger Pro ist ein Stromzähler verbaut. Wenn diese Option aktiviert ist, wird ein Ladevorgang unterbrochen bzw. nicht freigegeben, falls der Stromzähler bzw. die Kommunikation mit diesem gestört zu sein scheint. Wenn die Zählerüberwachung aktiviert ist, wird somit sichergestellt, dass die geladene Energie zu jedem aufgezeichneten Ladevorgang erfasst wird.
     \item[Zeitlimit] Setzt ein generelles Zeitlimit für Ladevorgänge. Nach Ablauf des Limits muss ein Fahrzeug abgezogen werden, um einen erneuten Ladevorgang zu ermöglichen. Das Zeitlimit kann für den nächsten oder laufenden Ladevorgang auf der Statusseite überschrieben werden.
     \item[Energielimit] Setzt beim WARP3 Charger Pro ein generelles Energielimit für Ladevorgänge. Diese Funktion wird analog zum Zeitlimit eingerichtet.
     \item[Tastereinstellung] Hiermit wird konfiguriert, welche Funktion der Taster an der Front
     des WARP3 Chargers haben soll. Im halb-öffentlichen Raum kann es beispielsweise sinnvoll sein,
     den Ladestop per Taster zu verbieten.
     \item[Abschalteingang] Am Abschalteingang kann zum Beispiel ein Rundsteuerempfänger angeschlossen werden.
     Hier kann eingestellt werden, wie auf Änderungen am Abschalteingang
	 reagiert werden soll. In der Standardkonfiguration der Wallbox wird auf \SI{4200}{\watt} limitiert, wenn der Abschalteingang geschlossen ist, siehe \fullref{s14enwg}.
     \item[Fahrzeug-Weckruf] Die Ladeelektronik mancher Fahrzeuge wechselt in
	 einen Energiesparmodus, falls ein Ladevorgang nicht innerhalb einer
	 gewissen Zeit gestartet wird. Der Fahrzeug-Weckruf versucht, solche Ladeelektroniken automatisch zu wecken, falls das Fahrzeug nicht innerhalb von 30 Sekunden reagiert, wenn Strom zur Verfügung steht. Umgesetzt wird dies durch eine kurzzeitige Trennung des Control-Pilot- bzw. CP-Signals.
	 \item[Automatischer Phasenwechsel] Diese Option steht nur für den WARP3
	 Charger Pro zur Verfügung. Ist die Option aktiviert, wird bei einem
	 laufenden Ladevorgang mit dem internen Stromzähler ermittelt, ob das
	 Fahrzeug nur einphasig lädt.
	 Ist dies der Fall, schaltet die Wallbox automatisch auf einphasiges
	 Laden um.
	 \item[Zuleitung] konfiguriert, ob die Wallbox
	 dreiphasig oder einphasig angeschlossen ist. Ist die
	 Wallbox nur einphasig angeschlossen und hier auch so konfiguriert, wird das zweite
	 Schütz für die Phasen L2 und L3 nie geschaltet, außerdem wird die Begrenzung der Ladeleistung nach \S14 EnWG entsprechend berechnet.
    \end{description}

    \subsubsection{Ladestatus}\label{evse}
    Die Unterseite \texttt{Ladestatus} gibt Auskunft über den Zustand
    des Ladecontrollers (EVSE) und dessen Hardware-Konfiguration. Probleme beim Laden
    können mithilfe der Informationen auf dieser Seite diagnostiziert werden.

    \paragraph{Ladestromgrenzen}
    In diesem Abschnitt werden die aktuellen Ladestromgrenzen angezeigt. Alle Grenzen, die
    derzeit aktiv sind, werden zur Entscheidung, ob ein Ladevorgang erlaubt ist, und zur Berechnung des maximalen Ladestroms einbezogen:
    Nur wenn alle aktiven Ladestromgrenzen nicht blockieren, wird ein Ladevorgang erlaubt.
    Der erlaubte Ladestrom ist dann das Minimum aller aktiven Grenzen. Folgende Grenzen können Teil der Berechnung sein:

    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
        \item[Zuleitung] Maximalstrom der Zuleitung zum WARP3 Charger.
            Dieser wird über die Schalter auf dem Ladecontroller konfiguriert, siehe \fullref{ladestrom_schalter}.
        \item[Typ-2-Ladekabel] Maximalstrom des Typ-2-Lade\-kabels.
        \item[Abschalteingang] Blockiert oder gibt den Ladevorgang frei, je nach Konfiguration des Abschalteingangs.
        \item[Konfigurierbarer Eingang] Kann analog zum Abschalteingang kann je nach Konfiguration blockieren, limitieren oder freigeben.
        \item[Manuelle Ladefreigabe] Kann durch Autostart-Ein\-stellung bzw. Drücken des Tasters blockieren oder freigeben.
        \item[Konfiguration] Wird durch das Eingabefeld auf der Statusseite eingestellt.
            Durch den \enquote{Freigeben}-Button wird eine eventuell eingetragene Ladestromgrenze komplett aufgehoben.
        \item[Benutzer/NFC] Blockiert, bis ein Benutzer den Ladevorgang durch ein NFC-Tag freigibt, falls       die Benutzerautorisierung aktiviert ist.
            Danach wird die diesem Benutzer zugeordnete Ladestromgrenze eingetragen.
        \item[Lastmanagement] Wird vom Lastmanager bzw. dem PV-Überschussladen gesteuert, falls aktiviert.
        \item[Externe Steuerung] Wird durch eine externe Steuerung über die API, beispielsweise EVCC, gesteuert.
        \item[Modbus TCP-Strom] Beschränkung des Ladestroms bei aktivierter Modbus TCP Schnittstelle.
        \item[Modbus TCP-Freigabe] Freigabe/Blockierung des Ladevorgangs bei aktivierter Modbus TCP-Schnitt\-stelle.
        \item[OCPP] Freigabe/Blockierung des Ladevorgangs bei aktivierter OCPP-Schnittstelle.
        \item[Energie/Zeitlimit] Begrenzung durch konfigurierte Energie- oder Zeitlimits.
        \item[Zählerüberwachung] Wird blockiert, wenn die Zähler\-überwachung eingeschaltet und keine Kommunikation mit dem Stromzähler möglich ist.
        \item[Automatisierung] Begrenzung durch eine auf der Unterseite \texttt{Automatisierung} konfigurierte Regel.
    \end{description}


    % Colors match those in the web interface
    \definecolor{mygray}{RGB}{108, 117, 125}
    \definecolor{mygreen}{RGB}{40, 167, 69}
    \definecolor{myblue}{RGB}{0, 123, 255}
    \definecolor{myorange}{RGB}{255, 193, 7}
    \definecolor{myred}{RGB}{220, 53, 69}
    Die Farbmarkierung neben einer Grenze hat folgende Bedeutung:
    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
     \item[\textbf{\textcolor{mygray}{Grau}}] Diese Ladestromgrenze ist nicht aktiv. Sie kann den Ladevorgang nicht blockieren und geht nicht in Berechnung des erlaubten Ladestroms ein.
     \item[\textbf{\textcolor{mygreen}{Grün}}] Diese Ladestromgrenze ist aktiv, beschränkt den erlaubten Ladestrom aber derzeit nicht.
     \item[\textbf{\textcolor{myblue}{Blau}}] Diese Ladestromgrenze ist aktiv und gibt ein Ladestromlimit vor. Andere aktive Grenzen limitieren den Ladestrom jedoch stärker.
     \item[\textbf{\textcolor{myorange}{Gelb}}] Diese Ladestromgrenze ist aktiv, blockiert den Ladevorgang nicht, gibt aber die aktuell stärkste Limitierung des Ladestroms vor.
     \item[\textbf{\textcolor{myred}{Rot}}] Diese Ladestromgrenze ist aktiv und blockiert den Ladevorgang.
    \end{description}

    \paragraph{Hardware-Konfiguration}
    Unter der Überschrift \enquote{Hard\-ware-Konfiguration} werden Informationen
    zur verbauten Hardware aufgeführt.

    \gfx{./img_warp3/resized/web_evse}

    \paragraph{Ladeprotokoll}
    Bei Ladeabbrüchen kann ein Ladeprotokoll
    helfen, die Ursache eines Fehlers zu ermitteln. Ein Ladeprotokoll kann
    wie folgt aufgezeichnet werden:
    \begin{enumerate}
        \item Ladeprotokoll im Browser starten (\enquote{Start}), Browserfenster geöffnet halten.
        \item Fahrzeug an Wallbox anschließen und Ladevorgang starten.
        \item Nach Auftreten des Fehlers \enquote{Stop+Download} klicken. Es
        sollte eine Textdatei heruntergeladen werden.
        \item Die Textdatei mit einer Problembeschreibung an \nohyphens{info@tinkerforge.com} senden.
    \end{enumerate}

    \subsubsection{Ladetracker}
    Siehe \fullref{charge_tracker}.

    \subsubsection{Automatisierung}
    Der WARP3 Charger kann automatisiert Regeln ausführen. So kann etwa
    der Empfang von MQTT-Nachrichten, das Auslesen eines NFC-Tags oder eine andere Bedingung
    Regeln ausführen, die beispielsweise Ladevorgänge steuern, MQTT-Nachrichten schicken oder
    den konfigurierbaren Ausgang schalten.
    Es können bis zu 14 Regeln definiert werden, um Vorgänge zu automatisieren.
    Dazu sind jeweils eine Bedingung und die Aktion der Wallbox bei Erfüllung der
    Bedingung zu definieren.

    \gfx{./img_warp3/resized/web_automation}

    \paragraph{Beispiel: Ladevorgänge nur zu bestimmten Uhrzeiten zulassen}
    Hierzu muss als Bedingung \enquote{Zeitpunkt} gewählt werden. Anschließend
    kann über die Einstellung \enquote{Tag} und \enquote{Uhrzeit} ein Zeitpunkt definiert werden, an
    dem die Wallbox eine Aktion ausführt. In diesem Fall soll die Aktion
    \enquote{Steuere Ladevorgang} und \enquote{Laden blockieren} gewählt werden. Nach
    Hinzufügen der Regel blockiert die Wallbox nun zum definierten
    Zeitpunkt das Laden. Mit einer weiteren Regel kann
    das Laden zu einem späteren Zeitpunkt wieder freigegeben werden. Dazu kann
    eine zweite Regel eingefügt werden, indem der Zeitpunkt der Freigabe definiert und die Aktion
    \enquote{Laden freigeben} gewählt wird. Mittels dieser zwei Regeln kann also die Ladung
    an gewissen Tagen und/oder Uhrzeiten eingeschränkt werden.


	\subsection{Energiemanagement}\label{energiemanagement}

	\subsubsection{Stromzähler}\label{meter}
	\vspace*{-0.1cm}
    Auf dieser Unterseite kann die Kommunikation mit Stromzählern konfiguriert werden.
    Da der WARP3 Charger Pro über einen eingebauten Stromzähler verfügt, ist dieser bei allen WARP3 Chargern vorkonfiguriert.
    Beim WARP3 Charger Smart kann dieser Zähler entfernt werden.
    Im Graph wird die gemessene Leistung aller konfigurierten Stromzähler
	angezeigt, entweder als Verlauf über die letzten \SI{48}{\hour} oder als
	Live-Ansicht. Die Ansicht jeders Zählers kann aufgeklappt werden, um weitere Statistiken und Messwerte anzuzeigen. Dazu muss auf den
	jeweiligen blauen Pfeil geklickt werden.

    \vspace*{-0.1cm}
    Es können insgesamt fünf Stromzähler konfiguriert werden, beispielsweise SunSpec-Zähler oder -Wechselrichter, SMA Speedwire-Geräte
    sowie virtuelle Stromzähler, die über die API befüllt werden können. Für das
	Photovoltaik-Überschussladen (siehe \fullref{pv_charge}) ist es notwendig,
	einen Stromzähler anzulegen, der den Überschuss (typischerweise am Hausanschluss) misst. SunSpec-(Modbus TCP)-Geräte können nach Angabe des Hosts
    automatisch erkannt werden. Abhängig von den Fähigkeiten des SunSpec-Geräts werden verschiedene Messwerte abgerufen.

    \vspace*{-0.1cm}
    Es können auch Modbus-TCP-Geräte ausgelesen werden, die SunSpec nicht unterstützen. Wir bieten vordefinierte Registertabellen für bestimmte Geräte, siehe \rurl{https://docs.warp-charger.com/docs/compatible\_meters}{docs.warp-charger.com/docs/compatible\_meters}. Von uns nicht unterstützte Modbus-TCP-Geräte können über eine benutzerdefinierte Registertabelle ausgelesen werden.

    \gfx{./img_warp3/resized/web_meters}

	\subsubsection{Wallboxen}

    Soll die PV-Überschussreglung verwendet oder
    die Wallbox zusammen mit anderen Wallboxen im Rahmen eines
	Lastmanagements eingesetzt werden, so wird hier
	eingestellt, wie die Wallbox sich verhält:
	\begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
		\item[Deaktiviert] Die Wallbox ist eigenständig, PV-Über\-schussladen ist deaktiviert.
		\item[Fremdgesteuert] Eine andere Wallbox oder ein WARP Energy Manager steuert diese Wallbox.
		\item[Lastmanager / PV-Überschussladen] Das Energiemanagement dieser Wallbox verwendet den PV-Überschussregler oder steuert neben sich selbst auch weitere Wallboxen. Die anderen Wallboxen müssen dazu im
		Abschnitt \enquote{Kontrollierte Wallboxen} hinzugefügt werden.
	\end{description}

	Der \textbf{Maximale Gesamtstrom} gibt an, wie viel Strom maximal durch den Lastmanagementverbund oder den PV-Überschussregler bezogen werden darf.

	\gfx{./img_warp3/resized/web_charge_manager_chargers}

    \subsubsection{PV-Überschussladen}
    Siehe \fullref{pv_charge}.

    \subsubsection{Lastmanagement}
    Siehe \fullref{charge_manager}.

    \subsection{Netzwerk}\label{network}
    Die Wallbox kann per WLAN oder LAN in ein Netzwerk eingebunden werden.
    In diesem Unterabschnitt können alle dazugehörigen Einstellungen vorgenommen werden.

    \subsubsection{Einstellungen}
    Hier kann der Hostname des WARP3 Chargers in allen verbundenen Netzwerken konfiguriert werden. Außerdem kann mDNS aktiviert oder deaktiviert werden.
    Über mDNS können andere Geräte im Netzwerk den WARP3 Charger finden. Damit
    wird zum Beispiel das Einrichten eines Lastmanagementverbunds vereinfacht.
    Zusätzlich kann der Port, auf dem das Webinterface erreichbar ist, geändert werden (Standard ist
    Port 80).

    \gfx{./img_warp3/resized/web_network}


    \subsubsection{WLAN-Verbindung}
    Eine Möglichkeit, um die Wallbox in ein Netzwerk zu integrieren, ist mittels WLAN.
    Durch Drücken des \enquote{Netzwerksuche}-Buttons öffnet sich ein Menü, in dem das gewünschte WLAN ausgewählt werden kann.
    Es werden dann automatisch Netzwerkname (SSID) und BSSID eingetragen, sowie die Verbindung beim Neustart aktiviert.
    Gegebenenfalls muss jetzt noch die Passphrase des gewählten Netzes eintragen
	werden.

    \gfx{./img_warp3/resized/web_wifi_sta}

    Die Konfiguration kann jetzt mit dem Speichern-Button abgespeichert werden.
    Das Webinterface startet dann neu und verbindet sich mit dem konfigurierten WLAN. Die Statusseite zeigt
    an, ob die Verbindung erfolgreich war. Der Access-Point bleibt weiterhin
    geöffnet, sodass Konfigurationsfehler behoben werden können.
    Da der Access-Point den gleichen Kanal wie ein eventuell verbundenes Netz verwendet,
    kann es sein, dass die Verbindung zum Access-Point neu aufgebaut werden muss.

    Bei einer erfolgreichen Verbindung sollte die Wallbox jetzt im konfigurierten Netzwerk unter\\
    \url{http://[konfigurierter_hostname]},\\ z.B. \url{http://warp3-ABC} erreichbar sein.

    \subsubsection{WLAN-Access-Point}
    \gfx{./img_warp3/resized/web_wifi_ap}

    Der Access-Point kann in einem von zwei Modi betrieben werden: Entweder kann er immer aktiv sein
    oder nur dann, wenn die Verbindung zu einem anderen WLAN bzw. zu einem LAN nicht konfiguriert oder fehlgeschlagen ist.
    Außerdem kann der Access-Point komplett deaktiviert werden.
    \hint{Wir empfehlen, den Access-Point nie komplett zu deaktivieren, da sonst bei einer
        fehlgeschlagenen Verbindung zu einem anderen Netzwerk das Webinterface nicht mehr erreicht
        werden kann. Die Wallbox kann dann nur über den Wiederherstellungsmodus
        (Abschnitt \ref{recovery}) oder ein Zurücksetzen auf Werkszustand, siehe Abschnitt \ref{reset}, erreicht werden.}

    Der Modus des Access-Points, Netzwerkname, Passphrase usw. können hier festgelegt werden.

    \subsubsection{LAN-Verbindung}
    \gfx{./img_warp3/resized/web_ethernet}
    Alternativ zur WLAN-Verbindung kann die Wallbox auch per LAN kabelgebunden
    ins Netzwerk integriert werden. In den meisten Fällen wird eine
    LAN-Verbindung automatisch hergestellt, falls ein Kabel eingesteckt ist
    (IP-Adresse wird per DHCP bezogen). Es ist aber auch möglich,
    eine statische IP-Konfiguration einzutragen, oder, falls gewünscht, die LAN-Verbindung
    komplett zu deaktivieren.

    Bei einer erfolgreichen Verbindung sollte die Wallbox jetzt im LAN unter
    \url{http://[konfigurierter_hostname]}, z.B. \url{http://warp3-ABC} erreichbar sein.

    \hint{Die LAN- und WLAN-Verbindung sollten nicht gleichzeitig zum selben Netzwerk bzw. IP-Bereich verbunden sein,
    da es sonst zu Verbindungsproblemen kommen kann.}

    \subsubsection{WireGuard}

    Mit WireGuard kann die Wallbox mittels einer verschlüsselten Verbindung in ein virtuelles privates Netzwerk (VPN) eingebunden werden. WireGuard wird von
    verschiedenen Routern direkt unterstützt. Das VPN kann zum Beispiel genutzt
    werden, um aus der Ferne auf die Wallboxen zuzugreifen, das
    Wallbox-Netzwerk vor einem Zugriff zu schützen oder das
    Lastmanagement zwischen den Wallboxen abzusichern.

    Die notwendigen Parameter sind WireGuard-spezifisch und werden an dieser Stelle
    nicht gesondert erläutert. Weitere Informationen finden sich auf\\
    \url{https://www.wireguard.com/}.

    \gfx{./img_warp3/resized/web_wireguard}

    \subsection{Schnittstellen}
    Siehe \fullref{interfaces}.

    \subsection{Benutzer}
    Siehe \fullref{user_management} und \fullref{NFC}.

    \subsection{System}
    Im System-Unterabschnitt können das Ereignis-Log eingesehen und
	Firmware-Aktualisierungen eingespielt werden.
    Außerdem können hier die Benutzer des WARP3 Chargers verwaltet werden (Siehe
    Abschnitt \ref{user_management}).

    \vspace{-0.2cm}
    \subsubsection{TLS-Zertifikate}\label{tls}
    Hier können bis zu acht TLS-Zertifikate hochgeladen werden. Diese Zertifikate können
    für OCPP- und MQTT-Verbindungen sowie zum Aufbau einer WiFi-Enterprise-Verbindung genutzt werden.

    \vspace{-0.2cm}
    \subsubsection{Zeitsynchronisierung}\label{ntp}

    \gfx{./img_warp3/resized/web_ntp}

    Der WARP3 Charger kann die aktuelle Uhrzeit per NTP über das Netzwerk empfangen.
    Die Uhrzeit ist notwendig, um diese im Ladetracker und dem Ereignis-Log anzeigen und
    WireGuard-Verbindungen aufbauen zu können.

    Auf dieser Unterseite kann NTP aktiviert oder deaktiviert und die Zeitzone, in der sich
    der WARP3 Charger befindet, konfiguriert werden. Außerdem ist es möglich, zusätzlich zu den konfigurierten Zeitservern einen weiteren zu verwenden, der vom Router per DHCP gesetzt wird. Das funktioniert allerdings nur, wenn keine statische IP-Konfiguration verwendet wird.

    \vspace{-0.2cm}
    \subsubsection{Echtzeituhr}

    \gfx{./img_warp3/resized/web_rtc}

    Der WARP3 Charger verfügt über eine Echtzeituhr, mit der die Uhrzeit auch ohne Netzwerkzugriff für den Ladetracker aufgezeichnet werden kann. Die Echtzeituhr wird automatisch gestellt, wenn das Webinterface geöffnet oder wenn eine Netzwerkzeitsynchronisierung durchgeführt wurde. Die Uhrzeit kann über mehrere Stunden gehalten werden, während der WARP3 Charger stromlos ist.


    \subsubsection{Ereignis-Log}

    Das Ereignis-Log zeichnet relevante Informationen des Systemstarts sowie WLAN- und MQTT-Ver\-bin\-dungs\-abbrüche und Ladefehler auf.
    Falls Probleme mit der Wallbox auftreten, können diese mit dem Log diagnostiziert werden.
    Um ein Problem mit der Wallbox an uns zu melden, können das Ereignis-Log
    sowie ein Debug-Report abgerufen werden, die uns helfen, das Problem zu verstehen und zu beheben.

    \gfx{./img_warp3/resized/web_event_log}

    \subsubsection{Firmware-Aktualisierung}\label{firmware-update}

    \gfx{./img_warp3/resized/web_firmware_update}

    Hier kannst die Firmware der Wallbox aktualisiert werden. Wir entwickeln die Funktionalität
    der Wallbox laufend weiter. Daher kann ggf. auch eine neue
    Version dieser Betriebsanleitung bereitgestellt werden.
    Die aktuelle Firmware und die neuste Betriebsanleitung steht unter
    \rurl{https://warp-charger.com}{warp-charger.com} zum Download bereit.

    \newpage
	\section{Photovoltaik-Überschussladen}\label{pv_charge}
	\gfx{./img_warp3/resized/web_pv_excess_settings}

	Beim Photovoltaik-Überschussladen ist das Ziel, die nicht selbst genutzte Leistung einer
	Photovoltaikanlage in ein
	Elektrofahrzeug zu laden, anstatt sie in das Stromnetz einzuspeisen. Die Maximierung der Eigenstromnutzung steht hier
	im Vordergrund.

	\subsection{Funktionsweise}
	Steht ein entsprechender Stromzähler zur Verfügung, kann die Wallbox den
	Ladevorgang so steuern, dass auf einen Soll-Netzbezug geregelt wird.

	Typischerweise handelt es sich um einen Stromzähler am Hausanschluss, der auf
	einen Bezug von \SI{0}{\watt} geregelt werden soll. Das heißt, die gesamte
	PV-Leistung soll in das Fahrzeug geladen werden, ohne dass ein Netzbezug
	stattfindet (\enquote{PV-Überschuss}).

	WARP3 Charger Smart und Pro sind mit zwei getrennten Schützen
	ausgestattet und können somit intern zwischen einem einphasigen und dreiphasigen
	Ladevorgang umschalten. Das Umschalten auf eine einphasige Ladung bietet den Vorteil, dass auch geringe
	Leistungsüberschüsse in ein Fahrzeug geladen werden können (ab ca.
	\SI{1,4}{\kilo\watt}), wohingegen ein dreiphasiger Ladevorgang die jeweilige
	Maximalleistung der Wallbox ermöglicht (\SI{11}{\kilo\watt} oder
	\SI{22}{\kilo\watt}).

	\subsection{Lademodi}

	Das Photovoltaik-Überschussladen kann Ladevorgänge in einem der folgenden vier Modi regeln:

	\begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
	 \item[Aus] Alle Ladevorgänge werden gestoppt
	 \item[PV] Fahrzeuge werden nur aus dem PV-Überschuss geladen.
               Wenn nicht genügend Überschuss zur Verfügung steht, wird der Ladevorgang gestoppt.
	 \item[Min+PV] Fahrzeuge werden aus dem PV-Überschuss geladen.
                   Falls nicht genügend Überschuss zur Verfügung steht, wird Strom aus dem Netz bezogen,
                   damit Ladevorgänge nicht gestoppt werden.
                   Der erlaubte Netzbezug kann konfiguriert werden.
     \item[Schnell] Fahrzeuge werden so schnell wie möglich geladen, unabhängig davon, wie viel PV-Überschuss zur Verfügung steht.
	\end{description}


	\subsection{Konfiguration}
	Folgende Einstellungen können vorgenommen werden:
	\begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
		\item[Überschussladen aktiviert] Schaltet den PV-Über\-schuss\-regler ein oder aus.
		\item[Umschaltungsmodus] Definiert das Verhalten der Phasenumschaltung.
		\item[Standardlademodus] Der Lademodus, der bei einem Neustart des WARP3 Chargers verwendet wird.
		\item[Stromzähler] Der Stromzähler, mit dem der PV-Überschuss gemessen wird. Dieser Stromzähler muss vorher entsprechend \fullref{meter} angelegt werden.
		\item[Min+PV: Mindestladeleistung] Legt fest, welche Leistung im \enquote{Min+PV}-Lademodus aus dem Netz bezogen werden darf.
		\item[Regelverhalten] Legt fest, auf welchen
		Netzbezug geregelt werden soll, damit beispielsweise ein Batteriespeicher höher oder niedriger priorisiert wird als das Laden von Fahrzeugen.
		\item[Wolkenfilter] Stellt die Trägheit der Regelung
		ein. Bei wechselnd bewölktem Wetter ist es sinnvoll, dass die Regelung
		träge reagiert, damit kurze Schwankungen der PV-Leistung geglättet werden.
	\end{description}

    \newpage
    \section{Schnittstellen zur Fernsteuerung der Wallbox}\label{interfaces}
    Die Wallbox kann per HTTP, MQTT, Modbus TCP und OCPP ferngesteuert werden. Über diese Schnittstellen ist eine
    Einbindung in Hausautomatisierungssysteme wie beispielsweise openHAB, ioBroker und FHEM möglich.
    Eine Verwendung mit Lastmanagern oder Energiemanagern von Fremdanbietern
    ist über die Schnittstellen ebenfalls möglich.

    \subsection{HTTP}\label{http-interface}
    Eine Möglichkeit, die Wallbox fernzusteuern, ist HTTP. Dazu ist keine
    spezielle Konfiguration notwendig. Falls die Anmeldung für das Webinterface aktiviert ist, müssen für die HTTP-API die selben Zugangsdaten verwendet werden.
    Weitere Informationen zur HTTP-API der Wallbox befinden sich auf \rurl{https://warp-charger.com/api.html}{warp-charger.com/api.html}


    \subsection{MQTT}\label{mqtt-interface}

    \gfx{./img_warp3/resized/web_mqtt}
    Auf der \texttt{MQTT}-Unterseite kann die Verbindung zu einem MQTT-Broker konfiguriert werden. Folgende Einstellungen können vorgenommen werden:
    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
        \item[Protokoll] Die verwendete MQTT-Protokollvariante. MQTT kann unverschlüsselt, TLS-verschlüsselt, unverschlüsselt über WebSockets oder TLS-verschlüsselt über WebSockets verwendet werden.
        \item[Broker-Hostname oder -IP-Adresse] Definiert den Hostname oder die IP-Adresse des Brokers, zu dem sich die Wallbox verbinden soll.
        \item[Broker-Port] Definiert den Port, unter dem der Broker erreichbar ist. Der typische MQTT-Port 1883 ist voreingestellt.
        \item[Broker-Benutzername und -Passwort] Manche Broker unterstützen eine Authentifizierung mit Benutzername und Passwort.
        \item[Topic-Präfix] Dieses Präfix wird allen Topics vorangestellt, die die Wallbox verwendet.
              Voreingestellt ist warp3/ABC, wobei ABC eine eindeutige Kennung pro Wallbox ist,
              es sind aber andere Präfixe wie z.B. garage\_links möglich.
              Falls mehrere Wallboxen mit dem selben Broker kommunizieren,
              müssen eindeutige Präfixe pro Wallbox gewählt werden.
        \item[Client-ID] Mit dieser ID registriert sich die Wallbox beim Broker.
        \item[Sendeintervall] Der WARP3 Charger verschickt MQTT-Nachrichten nur, wenn sich die enthaltenen Daten geändert haben.
            Es gibt Teile der API, deren Daten sich sekündlich ändern. Das Sendeintervall kann hier reduziert werden, wenn weniger Netzwerktraffic
            erzeugt werden soll.
        \item[Discovery] Erlaubt die automatische Integration in manche Hausautomatisierungssysteme, z.B. HomeAssistant.
    \end{description}
    Wenn die MQTT-Verbindung konfiguriert und aktiviert ist, verbindet sich die Wallbox nach dem nächsten Neustart zum Broker. Auf der Statusseite wird angezeigt, ob die Verbindung aufgebaut werden konnte.

    Weitere Informationen über die MQTT-API der Wallbox finden sich unter
	\rurl{https://warp-charger.com/api.html}{warp-charger.com/api.html}.

    \subsection{Modbus TCP}

    \gfx{./img_warp3/resized/web_modbus_tcp}

    Mit Modbus TCP kann auf Funktionen der Wallbox zugegriffen werden. Folgende Einstellungen können vorgenommen werden:

    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
     \item[Modbus TCP-Modus] Es kann ein reiner Lesezugriff (ohne
    Steuerungsmöglickeit von außen) oder ein Lese-/Schreibzugriff
    aktiviert werden, mit dem z.B. Ladevorgänge gesteuert werden können.
     \item[Port] über den die Modbus TCP-Kommunikation erfolgt.
     \item[Registertabelle] definiert, welche Funktionen unter
    welchen Registern bereitgestellt werden. Leider gibt es hier keinen
    allgemein nutzbaren Standard. Daher werden drei Möglichkeiten angeboten:
        \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
        \item[WARP Charger] Bietet einen nahezu vollständigen Zugriff auf die Wallbox.
                Diese Registertabelle ist im \fullref{modbus_tcp_registertabelle},
                jeweils passend zur ausgeführten Firmware auf der \texttt{Modbus TCP}-Unterseite des Webinterfaces oder auf auf \rurl{https://warp-charger.com/api.html}{warp-charger.com/api.html} dokumentiert.
        \item[Kompatibilität zu Bender CC613] Mit dieser Registertabelle emuliert der WARP3 Charger einen Bender CC613-Ladecontroller. Dieser wird in vielen Wallboxen verschiedener Hersteller verbaut.
        \item[Kompatibilität zu Keba C Series] Mit dieser Registertabelle emuliert der WARP3 Charger eine Wallbox der C-Series von Keba.
    \end{description}
    Sollen Fremdgeräte den WARP3 Charger fernsteuern, kann gegebenenfalls eine der
    kompatiblen Registertabellen verwendet werden.
    \end{description}

    \subsection{OCPP}
    \gfx{./img_warp3/resized/web_ocpp}

    OCPP (Open Charge Point Protocol) ist ein standardisiertes Kommunikationsprotokoll zwischen
    Ladestationen und einem zentralen Managementsystem. Der WARP3 Charger
    unterstützt OCPPJ 1.6 Core Profile und Smart Charging Profile.

    Um OCPP zu nutzen, muss auf der Konfigurationsseite OCPP aktiviert und die
    Endpoint-URL des Managementsystems eingetragen werden. Zusätzlich kann die Ladepunkt-Identität
    geändert werden. Diese wird sowohl an die Endpoint-URL angehangen als auch gegebenenfalls zum
    Anmelden per HTTP-Basic-Auth am OCPP-Server verwendet.

    Falls eine Anmeldung durchgeführt werden soll, muss die Autorisierung aktiviert
    und ein Passwort oder Hex-Key gesetzt werden. Wenn das eingegebene Passwort exakt 40 Zeichen lang ist
    und nur aus Hexadezimal-Zeichen (0-9, A-F, a-f) besteht, wird es als Hex-Key interpretiert, der ein 20
    Byte langen Schlüssel kodiert.

    Unter den Punkten Debug und Konfigurationen finden sich weiterführende Informationen, mit denen Probleme
    bei der Interaktion mit einem OCPP-Server diagnostiziert werden können.

	\newpage
    \section{Lastmanagement zwischen mehreren WARP Chargern}\label{charge_manager}
    Mit dem Lastmanagement ist es möglich, einen verfügbaren Gesamt-Ladestrom zwischen bis zu 32 WARP Chargern aufzuteilen. Hierbei wird ein WARP Charger als Lastmanager konfiguriert, der die weiteren bis zu 31 Wallboxen im Verbund steuert und ihnen Ladeströme zuweist.

    Ohne Stromzähler am Hausanschluss kann ein fester Gesamtstrom verteilt werden, um zum Beispiel den Hausanschluss nicht zu überlasten. Dieser Gesamtstrom kann über das Webinterface und die API gesetzt werden.

    Wenn ein Zähler am Hausanschluss vorhanden ist und vom Lastmanager ausgelesen werden kann (die aktuelle Liste kompatibler Stromzähler findet sich hier: \rurl{https://docs.warp-charger.com/docs/compatible\_meters}{docs.warp-charger.com/docs/compatible\_meters}), kann das \textbf{dynamische Lastmanagement} verwendet werden, das sicherstellt, dass der Hausanschluss nie durch die WARP Charger überlastet wird, auch wenn andere Verbraucher zu- oder abgeschaltet werden. Außerdem kann dann das PV-Überschussladen verwendet werden.

    \gfx{./img_warp3/resized/web_charge_manager_settings}

    \subsection{Funktionsweise}
    Durch das Lastmanagement kontrollierte Wallboxen laden nur, wenn ihnen vom Lastmanager ein Ladestrom freigegeben wird. Wenn eine gewisse Zeit lang kein Ladestrom freigegeben wurde, oder der Lastmanager nicht erreicht werden kann, stoppt die Wallbox den Ladevorgang automatisch. Der Lastmanager stoppt seinerseits das Laden an allen kontrollierten Wallboxen, wenn eine Wallbox nicht mehr reagiert oder erreicht wird. Damit wird sichergestellt, dass der verfügbare Strom nicht überschritten wird.

    Der Lastmanager verteilt den verfügbaren Strom möglichst fair zwischen Wallboxen, die laden bzw. ladebereit sind, stellt sicher, dass die Zuleitung zu den Wallboxen und der Hausanschluss nicht überlastet werden, nutzt gegebenenfalls einen vorhandenen PV-Überschuss aus (siehe PV-Überschussladen) und versucht Schaltvorgänge zu minimieren.

    \subsection{Konfiguration}
    Um das Lastmanagement zu verwenden, muss zunächst auf allen Wallboxen, die gesteuert werden sollen,
    der Fremdsteuerungsmodus unter \texttt{Energiemanagement} $\rightarrow$ \texttt{Wallboxen} auf \enquote{fremdgesteuert} konfiguriert werden.
    In diesem Modus lädt eine Wallbox nur noch, wenn der Ladevorgang vom Lastmanager freigegeben wird.

    Auf der Wallbox, die die anderen Wallboxen steuern soll (dem Lastmanager), muss zunächst der Fremdsteuerungsmodus \enquote{Lastmanager} gewählt werden.
    Zusätzlich muss hier jede Wallbox, die gesteuert werden soll, als \enquote{Kontrollierte Wallbox} hinzugefügt werden.
    Bei Klick auf \enquote{Wallbox hinzufügen} erscheinen nach wenigen Sekunden alle Wallboxen, die vom Lastmanager erreicht werden können.
    Durch Klicken auf eine gefundene Wallbox wird diese hinzugefügt. Wallboxen, die nicht hinzugefügt werden können, werden grau hinterlegt.

    Jeder kontrollierten Wallbox kann eine Phasenrotation zugewiesen werden. Diese gibt an, wie die Wallbox in Relation zum Netz­an­schluss- bzw. PV-Über­schuss-Zähler oder zu den anderen Wallboxen an­ge­schlos­sen ist. Ty­pi­scher­wei­se werden nur rechts­dre­hen­de Pha­sen­ro­ta­ti­o­nen verwendet. Eine Wallbox, die, wenn sie einphasig lädt, die Netz­an­schluss­pha­se L2 belastet, ist dann bei­spiels­weise mit der Pha­sen­ro­ta­ti­on L231 an­ge­schlos­sen.

    Wenn die Pha­sen­ro­ta­ti­on aller oder auch nur eines Teils der ge­steu­er­ten Wallboxen bekannt ist, können mehr Fahrzeuge parallel geladen werden und PV- und Netz­an­schluss­li­mits besser aus­ge­reizt werden: Eine Wallbox mit un­be­kann­ter Pha­sen­ro­ta­ti­on wird, wenn sie einphasig lädt, vom Last­manage­ment so behandelt als ob sie alle drei Phasen belasten würde.

    Nach Zuordnung der Wallboxen muss der \enquote{Maximal verfügbare Strom} konfiguriert werden. Dieser ist typischerweise die Belastbarkeit der gemeinsamen Zuleitung der Wallboxen.

    Weitere Einstellungen finden sich auf der Unterseite \texttt{Energiemanagement} $\rightarrow$ \texttt{Lastmanagement}

    \subsection{Dynamisches Lastmanagement}

    Damit das dynamische Lastmanagement verwendet werden kann, muss zunächst ein
    Stromzähler hinzugefügt werden, der die Phasenströme am Hausanschluss messen kann.
    Dieser kann, so gewünscht, auch für ein PV-Überschussladen verwendet werden,
    das dynamische Lastmanagement kann aber auch ohne PV-Anlage verwendet werden. Dieser Stromzähler muss vorher entsprechend \fullref{meter} angelegt werden.

    Nachdem ein Zähler hinzugefügt wurde, kann auf der \texttt{Energiemanagement} $\rightarrow$ \texttt{Lastmanagement}-Unterseite das dynamische Lastmanagement aktiviert und konfiguriert werden.

    Zunächst muss der eben konfigurierte Stromzähler ausgewählt werden.

    Danach muss der \enquote{Maximale Strom am Netzanschluss} konfiguriert werden. Dieser ist typischerweise der Nennwert der Absicherung. Das dynamische Lastmanagment stellt sicher, dass dieser Wert nicht überschritten wird.

    Als letztes muss der zu erwartende \enquote{Stromverbrauch des größten Verbrauchers} konfiguriert werden. Dieser kann beispielsweise ein Durchlauferhitzer oder eine Wärmepumpe sein, mindestens aber 16 Ampere aus einer Schuko-Dose. Der Wert gibt den größten zu er­war­ten­den plötz­li­chen Sprung des Strom­bezugs am Zähler an, den das dy­na­mi­sche Last­manage­ment kurz­fris­tig (in unter 30 Sekunden) kom­pen­sieren können muss.

    \hint{Die vom Last­manage­ment ge­steu­er­ten Wallboxen müssen nicht be­rück­sich­tigt werden!}

    \vfill
    \null
    \columnbreak

    \section{Fernzugriff}

    Über die Fernzugriffs-Funktion kann auch von außerhalb des eigenen Netzwerks auf das Webinterface des WARP Chargers zugegriffen werden.

    Zur Verwendung des Fernzugriffs, bzw. der Apps muss zunächst ein Account auf \rurl{https://my.warp-charger.com}{my.warp-charger.com} erstellt werden. Die Account-Daten müssen dann auf dem Webinterface des WARP Chargers unter \texttt{System} $\rightarrow$ \texttt{Fernzugriff} eingetragen werden.

    \gfx{./img_warp3/resized/web_remote_access}

    \hint{Fernzugriffsverbindungen sind Ende-zu-Ende verschlüsselt. Der \url{my.warp-charger.com}-Server überträgt die verschlüsselten Daten zwischen Wallbox und Browser, bzw. App und hat weder Einsicht in die übertragenen Daten, noch Zugriff auf die Wallbox.}

    \vfill
    \null
    \columnbreak

    \section{Ladetracker}\label{charge_tracker}
    \gfx{./img_warp3/resized/web_charge_tracker}
    Der WARP3 Charger zeichnet alle durchgeführten Ladevorgänge auf. Pro Ladevorgang werden die folgenden Informationen gespeichert:
    \begin{itemize}
     \item Startdatum und Zeit des Ladevorgangs, falls Datum und Zeit bekannt
     sind. Siehe \fullref{ntp}.
     \item Benutzer, der den Ladevorgang gestartet hat, falls bekannt.
     \item Zählerstand beim Start und Ende des Ladevorgangs (nur WARP3 Charger Pro). Hieraus wird die geladene Energie in \SI{}{\kWh} berechnet.
     \item Dauer des Ladevorgangs.
    \end{itemize}
    Aus diesen Informationen und dem konfigurierten Strompreis werden die Kosten der Ladevorgänge berechnet. Die Kosten werden nicht pro Ladevorgang aufgezeichnet, sondern anhand des konfigurierten Strompreises berechnet. Das heißt insbesondere, dass, wenn der Strompreis geändert wird, auch die angezeiten Kosten älterer Ladevorgänge geändert werden.

    \hint{Damit Ladevorgänge einem Benutzer zugeordnet werden können, muss
        \begin{itemize}
            \item mindestens ein Benutzer angelegt sein und die Lade­freigabe der Benutzerverwaltung aktiviert sein (Siehe \fullref{user_management})
            \item dem Benutzer ein NFC-Tag zugeordnet sein (Siehe \fullref{NFC})
        \end{itemize}
        Im Werkszustand sind drei Benutzer mit je einem NFC-Tag eingerichtet. Es muss dann nur die Lade­freigabe unter \texttt{Benutzer} $\rightarrow$ \texttt{Benutzerverwaltung} aktiviert werden.
    }

    Diese Informationen werden \textit{nur} auf dem WARP3 Charger gespeichert.
    Aufgezeichnete Ladevorgänge können im Webinterface auf der \texttt{Ladetracker}-Unterseite entweder als PDF, oder als ein CSV-Dokument,
    kompatibel zu üblichen Tabellenkalkulationsprogrammen, heruntergeladen werden. Außerdem kann das erzeugte Dokument
    vorgefiltert werden, um beispielsweise nur Ladevorgänge eines bestimmten Benutzers in einem festgelegten Zeitraum zu erhalten.

    Werden die Ladevorgänge als PDF heruntergeladen, so kann zusätzlich ein
	Briefkopf angegeben werden. Dieser kann maximal 6 Zeilen zu je 50 Zeichen
    umfassen. Der Briefkopf wird in der PDF so hinterlegt, dass er bei üblicher Faltung im Fenster eines Briefumschlags sichtbar ist.

    Werden die Ladevorgänge als CSV heruntergeladen, kann zwischen zwei Formaten
	gewählt werden:
    \begin{description}[labelindent=0.5cm, leftmargin=0.5cm]
     \item[Excel-kompatibel] Erzeugt eine CSV-Datei, die ohne Importkonfiguration von Excel geladen werden kann. Der Feldtrenner ist ein Semikolon, in der ersten Zeile wird dies (für andere Sprachversionen) mit sep=; markiert. Die Datei wird Windows-1252 kodiert, deshalb sind möglicherweise nicht alle Benutzernamen darstellbar.
     \item[RFC4180] Erzeugt eine CSV-Datei die nach RFC4180 formatiert ist. Der Feldtrenner ist ein Komma, die Datei wird UTF-8 kodiert.
    \end{description}

    Der WARP3 Charger kann bis zu 7680 Ladevorgänge aufzeichnen.

    \newpage
    \section{Benutzerverwaltung} \label{user_management}

    Auf der Unterseite \texttt{Benutzerverwaltung} im \texttt{System}-Abschnitt des Webinterfaces können bis zu 32 Benutzer angelegt werden.
    Einem angelegten Benutzer, dem ein NFC-Tag zugeordnet wurde (siehe \fullref{NFC}), können vom Ladetracker Ladevorgänge zugeordnet werden.

    In der Werkseinstellung sind drei Nutzer angelegt,
    denen jeweils eine der mitgelieferten NFC-Karten zugeordnet wurde. Diese können
    umbenannt oder gelöscht werden.

    Ein neuer Nutzer kann mittels Klicken auf \enquote{Benutzer hinzufügen} hinzugefügt werden.
    Anschließend öffnet sich ein Modalfenster, in dem der eigentliche Benutzername, der Anzeigename (für die Anzeige im Ladetracker)
    und der dem Nutzer erlaube maximale Ladestrom eingestellt werden können.
    Zusätzlich kann dem Nutzer ein Passwort für die HTTP-Anmeldung (siehe
    folgenden Abschnitt) gegeben werden.

    Soll nur eine Ladefreigabe mittels NFC/Benutzerfreigabe möglich sein, so
    muss \texttt{Benutzerautorisierung} aktiviert werden.

    Wenn \enquote{Anmeldung aktiviert} ausgewählt ist, muss zum Zugriff auf das Webinterface und zur Verwendung
    der HTTP-API eine Anmeldung als einer der konfigurierten Benutzer durchgeführt werden. Eine HTTP-Anmeldung ist nur möglich, wenn
    dem Benutzer ein Passwort konfiguriert wurde. Die Funktion ist nur aktivierbar, wenn mindestens ein Nutzer mit konfiguriertem Passwort existiert. Entsprechend können Benutzer erstellt werden, die nur für das Ladetracking per NFC-Tag
    verwendet werden, aber keinen Zugriff auf das Webinterface haben sollen,
	indem diesen kein Passwort gegeben wird.
    \hint{Wenn die Zugangsdaten der HTTP-Anmeldung verloren gegangen sind, kann nur
    über den Wiederherstellungsmodus (Abschnitt \ref{recovery}) oder nach einem
    Zurücksetzen auf den Werkszustand (Abschnitt \ref{reset}) wieder darauf zugegriffen werden.}

    Sollen mehrere Nutzer angelegt werden, so empfehlen wir, diese direkt
    nacheinander anzulegen. Anschließend müssen die Änderungen gespeichert und
    die Wallbox neugestartet werden, damit die Änderungen übernommen werden.

    \gfx{./img_warp3/resized/web_users}

    \newpage
    \section{Ladefreigabe per NFC}
    \label{NFC}
    Der WARP3 Charger unterstützt eine Ladefreigabe per NFC (siehe \fullref{user_management}).
    Wenn diese aktiviert ist,
    muss zum Starten und/oder Stoppen eines Ladevorgangs ein NFC-Tag, das einem Benutzer zugeordnet ist, an die rechte Seite
    der Wallbox gehalten werden. Es können beliebige NFC-Tags der Typen 1 bis 4
    sowie Mifare Classic angelernt werden. Der WARP3 Charger unterstützt bis zu 32 angelernte Tags.

    \subsection{Konfiguration}
    \gfx{./img_warp3/resized/web_nfc}

    Auf der \texttt{NFC}-Unterseite des Webinterfaces können die berechtigten Tags konfiguriert werden.
    Im Werkszustand sind die drei mitgelieferten NFC-Karten angelernt,
    das Starten und Stoppen eines Ladevorgangs ist aber so konfiguriert, dass eine
    Freigabe ohne Tag möglich ist.

    Durch Klicken auf den \enquote{+}-Button kann ein neues Tag angelernt werden.
    Es werden die zuletzt erkannten, aber noch nicht berechtigten Tags in einer
    Liste anzeigt, durch Klicken auf eines der Tags kann dieses übernommen werden. Ein Neustart der
    Wallbox leert die Liste. Sollen also mehrere Tags nacheinander hinzugefügt
    werden, empfehlen wir, die Tags nacheinander an die Wallbox zu halten. Die
    Tags werden chronologisch in der Liste aufgeführt und können
    nacheinander angelegt und existierenden Benutzern zugeordnet
    werden. Wurden alle NFC-Tags angelernt, können die Einstellungen gespeichert und die
    Wallbox neugestartet werden.

    Alternativ können Tag-ID und -Typ manuell eingegeben werden. Dies ist zum Beispiel sinnvoll,
    wenn Tag-ID und -Typ mittels externer Geräte (z.B. Smartphone mit passender
    App) ermittelt und eingetragen werden sollen.

    Auf der \texttt{Benutzerverwaltungs}-Unterseite (siehe \fullref{user_management}) kann die Option \enquote{Ladefreigabe} aktiviert werden.
    Wenn diese aktiv ist, muss ein NFC-Tag verwendet werden, um einen Ladevorgang zu starten.
    Wenn zusätzlich die \enquote{Tastereinstellung} auf der \texttt{Ladecontroller}-Unterseite auf \enquote{keine Aktion} konfiguriert wird,
    muss auch zum Stoppen eines Ladevorgangs ein NFC-Tag an die Wallbox gehalten werden. Dies kann im
    halb-öffentlichen Raum sinnvoll sein.

    \subsection{Verwendung}
    Wenn die NFC-Ladefreigabe aktiviert ist und ein Fahrzeug angeschlossen wird,
    beginnt die Wallbox mit einem schnellen Auf- und Abblenden der LED in gelb.
    Dies soll daran erinnern, dass ein Tag notwendig ist, um zu laden.
    Wenn ein berechtigtes Tag erkannt wurde, wechselt die LED auf grün.
    Wenn ein unberechtigtes Tag erkannt wurde, wechselt die LED auf rot.

    Wenn ein berechtigtes Tag erkannt wurde, sollte der Ladevorgang kurz danach
    freigeschaltet werden. Es kann sein, dass der Ladevorgang nicht
    sofort beginnt, sondern erst nachdem eine Ladefreigabe z.B. vom Lastmanagement erhalten wurde
    und das Fahrzeug einen Ladevorgang anfordert. Die NFC-Freigabe bleibt aber erhalten,
    bis das Ladekabel vom Fahrzeug getrennt wird.

    \newpage
    \section{Fehlerbehebung}\label{fehlerbehebung}
    \subsection{Fehlersuche}
    Fehlerzustände werden von der Wallbox durch die LED im Fronttaster rot
    dargestellt. Bei den Varianten WARP3 Charger Smart und WARP3 Charger Pro
    gibt das Webinterface bzw. die \texttt{Ladestatus}-Unterseite
    weitere Informationen.

    \subsubsection*{LED ist aus}
    Für diesen Fehlerzustand gibt es verschiedene mögliche Ursachen:
    \begin{itemize}
        \item Die LED geht nach etwa 15 Minuten Inaktivität aus. Das Drücken des Tasters
              oder das Anschließen eines Elektrofahrzeugs weckt die Wallbox wieder
              und die LED sollte wieder dauerhaft blau leuchten.
        \item Die Wallbox ist nicht mit Strom versorgt. Mögliche Ursachen: Stromausfall,
              Sicherung oder Fehlerstrom\-schutzschalter haben ausgelöst.
        \item Der interne Ladecontroller ist ohne Strom. Die Wallbox verfügt
		intern über eine Feinsicherung, gegebenenfalls ist diese defekt.
        \item Das innere Anschlusskabel zum Deckel wurde nicht korrekt aufgesteckt (zum Beispiel am Taster \SI{180}{\degree} verdreht).
    \end{itemize}

    \subsubsection*{LED blinkt sehr schnell magenta}\label{fast_blink}
    Nach dem Einschalten der Stromversorgung kalibriert die Wallbox die
    DC-Fehlerstromerkennung. Nach drei Sekunden sollte die Kalibrierung
    abgeschlossen sein und die LED sollte dauerhaft blau leuchten
    (betriebsbereit).

    \subsubsection*{LED blinkt zweimal rot im Intervall \\ Webinterface zeigt Schalterfehler}
    Die Wallbox wurde nicht korrekt installiert. Die Schalter-Einstellung des Ladecontrollers ist
    noch auf dem Werkszustand. Siehe \fullref{ladestrom_schalter}.

    \begin{minipage}{\linewidth} %use minipage to control footnote placement
        \subsubsection*{LED blinkt dreimal rot im Intervall \\ Webinterface zeigt DC-Fehler}
        Ein DC-Fehlerstrom wurde erkannt. Der Fehler kann entweder über die Webseite der Wallbox oder über
        ein kurzzeitiges Trennen der Stromversorgung der Wallbox zurückgesetzt
        werden. Achtung: den Hinweis in \fullref{dcerrorhint} beachten!
    \end{minipage}

    \subsubsection*{LED blinkt viermal rot im Intervall \\ Webinterface zeigt Schützfehler bzw. PE Fehler}
    Für diesen Blinkcode gibt es zwei verschiedene Fehlerzustände mit
	verschiedenen möglichen Ursachen:

	Schützfehler:
	    \begin{itemize}
        \item Eines der Schütze schaltet nicht korrekt ein
        \item Eines der Schütze schaltet nicht korrekt ab, \enquote{Schütz klebt}
    \end{itemize}
	Das Webinterface der Wallbox gibt weitere Informationen, um welches Schütz es
	sich handelt.

	PE-Fehler:
    \begin{itemize}
        \item Phase L1 ohne Spannung (ggf. L1/N vertauscht)
        \item Erdungsfehler der Wallbox (ggf. PE nicht korrekt angeschlossen)
    \end{itemize}

    \subsubsection*{LED blinkt fünfmal rot im Intervall \\ Webinterface zeigt Kommunikationsfehler}
    Es besteht ein Kommunikationsfehler mit dem Elektrofahrzeug. Bei erstmaligem
    Auftreten das Ladekabel vom Fahrzeug trennen, 10 Sekunden warten und das
    Ladekabel erneut mit dem Fahrzeug verbinden (erneuter Ladevorgang).

    Sollte das Problem bestehen bleiben, so kann es verschiedene Gründe dafür
    geben:
    \begin{itemize}
        \item Es liegt ein Fehler beim Ladekabel vor (Kurzschluss, verschmutze / feuchte
              Kontakte o.ä.). Die Wallbox ist dann sofort außer Betrieb zu nehmen und
              in Stand zu setzen.
        \item Es liegt ein technischer Defekt beim Fahrzeug vor.
        \item Es liegt ein technischer Defekt bei der Wallbox vor
			(Ladecontroller defekt o.ä.).
        \item Das Fahrzeug fordert den IEC 61851-1 Status \enquote{D – Laden mit Belüftung}
              an. Dieser Modus wird von der Wallbox nicht unterstützt.
        \item Das Fahrzeug übermittelt den IEC 61851-1 Status E oder F. In beiden Fällen
              handelt es sich um einen Fehler, den das Fahrzeug erkannt hat.
    \end{itemize}

    \subsubsection*{Die Wallbox ist nicht über LAN / WLAN erreichbar, aber die
	LED leuchtet blau}
    In diesem Fall ist zu prüfen, ob die Wallbox gegebenenfalls in den Access-Point-Fallback
    gegangen ist. Wie im Werkszustand eröffnet die Wallbox dann ein eigenes
    WLAN. Wenn die Zugangsdaten nicht geändert wurden, entsprechen sie den Werkseinstellungen und sind dem
    Aufkleber auf der Rückseite der Anleitung zu entnehmen.


    \subsection{Wiederherstellungsmodus}\label{recovery}
    Falls die Wallbox weder ihren Access-Point öffnet noch über ein konfiguriertes Netzwerk auf das Webinterface zugegriffen werden kann,
    kannst wie folgt der Wiederherstellungsmodus gestartet werden:
    \begin{enumerate}
     \item Wallbox stromlos machen
     \item Taster im Deckel gedrückt halten
     \item Stromversorgung der Wallbox wieder herstellen (ggf. mit einer zweiten Person).
     \item Taster ungefähr 20 Sekunden lang (mindestens 10, aber maximal 30) gedrückt halten.
    \end{enumerate}
    Die Wallbox startet dann im Wiederherstellungsmodus. Zunächst werden die Netzwerkeinstellungen gelöscht sowie die Anmeldung deaktiviert.
    Anschließend sollte es wieder möglich sein, über den Access-Point auf die Wallbox zuzugreifen.

    Durch erneutes Trennen und Verbinden der Stromversorgung innerhalb der ersten Minute im Wiederherstellungsmodus kann ein Zurücksetzen auf Werkszustand ausgelöst werden.

    \subsection{Zurücksetzen auf Werkszustand}\label{reset}
    Falls das Webinterface nicht korrekt funktioniert oder die Konfiguration defekt ist,
    können auf der Unterseite \texttt{Firmware-Aktualisierung} alle Einstellungen auf den Werkszustand zurückgesetzt werden.
    \hint{Durch das Zurücksetzen auf Werkszustand gehen \textit{alle} Konfigurationen, angelegten Benutzer, angelernten NFC-Tags und aufgezeichneten Ladevorgänge verloren.}
    Nach dem Zurücksetzen startet das Webinterface wieder und öffnet
    den Access-Point mit der SSID und Passphrase, die auf dem Aufkleber vermerkt
    sind. Die Wallbox kann jetzt wieder nach \fullref{setup} konfiguriert werden.

    Damit aufgezeichnete Ladevorgänge nicht verloren gehen, kann alternativ nur die Konfiguration zurückgesetzt werden.
    Angelegte Benutzer (aber nicht der Benutzerverlauf des Ladetrackers) und NFC-Tags werden dennoch gelöscht.

    Falls eine Netzwerkverbindung aufgebaut werden kann, aber das Webinterface
	selbst nicht mehr funktioniert, kann versucht werden, die Recovery-Seite zu öffnen.
    Falls eine Verbindung über den Access-Point der Wallbox besteht, kann
	die Recovery-Seite unter \url{http://10.0.0.1/recovery} aufgerufen werden. Bei einer bestehenden Verbindung zu einem Netzwerk kann die Seite über \url{http://[konfigurierter_hostname]/recovery}, also z.B. \url{http://warp3-ABC/recovery} erreicht werden.
    Auf der Recovery-Seite kann die Wallbox neugestartet oder auf den Werkszustand zurückgesetzt (Factory Reset) werden und es können Firmware-Updates einspielt, Debug-Reports
    heruntergeladen und die HTTP-API verwendet (siehe \fullref{http-interface}) werden.

    \subsection{Probleme bei Ladevorgängen lösen}
    Treten Ladeabbrüche auf, so kann dies verschiedene Ursachen haben. Mögliche
    Ursachen können eine fehlerhafte Installation der Wallbox oder ein
    technischer Defekt der Wallbox oder des Fahrzeugs sein.
    Folgende Punkte sollten überprüft werden:

    \paragraph*{Sitz des Typ-2-Steckers} Ein nicht vollständig eingesteckter Typ-2-Stecker kann dazu führen,
        dass ein Fahrzeug nicht oder nur in einem Notlademodus mit minimaler Leistung lädt. Ein Indiz hierfür kann sein, dass
        das Fahrzeug den Typ-2-Stecker nicht korrekt verriegelt.
    \paragraph{Inspektion aller Komponenten} Es sollten alle Komponenten
        auf Beschädigungen und Nässe kontrolliert werden.
    \paragraph{Webinterface der Wallbox} Steht nur bei den Varianten Smart und
        Pro zur Verfügung. Die \texttt{Status}seite gibt den Ladestatus, den erlaubten Ladestrom und den Grund für eventuelle Limitierungen aus
        Sicht der Wallbox an. Detailliertere Informationen gibt die
        Unterseite \texttt{Ladestatus}. Hier kann außerdem ein Ladeprotokoll
        erzeugt werden, welches alle Werte des Ladevorgangs aufzeichnet.
    \paragraph{Messung durch eine Elektrofachkraft} Elektrische Probleme können von
        einer Elektrofachkraft diagnostiziert werden. Sie kann prüfen, ob alle Leiter
        korrekt angeschlossen sind.

    \subsection{Lastmanagementfehler}
    Bei der Verwendung des Lastmanagements können zwei Arten von Fehlern auftreten: Wallbox-Fehler, die nur eine spezifische Wallbox betreffen, und Management-Fehler,
    bei deren Auftreten das Laden an \textit{allen} gesteuerten Wallboxen gestoppt wird.

    Wallbox-Fehler müssen an der entsprechenden Wallbox behoben werden. Hier
	hilft \fullref{fehlerbehebung}. Im Folgenden wird die Diagnose von Management-Fehlern erläutert:

    \paragraph{Kommunikationsfehler / Wallbox nicht erreichbar}
    Eine Wallbox kann nicht zuverlässig erreicht werden. Eventuell liegt ein
	Verbindungsproblem vor. In diesem Fall die Netzwerkverbindung bzw. das
	Netzwerkkabel und die IP-Konfiguration der Wallbox prüfen.

    \paragraph{Firmware inkompatibel}
    Das Lastmanagement benötigt kompatible Firmwares auf allen beteiligten Wallboxen. Die jeweils aktuellen Firmwares sollten zueinander kompatibel sein,
    selbst wenn WARP(1), WARP2 und WARP3 Charger in einem Lastmanagementverbund verwendet werden.

    \paragraph{Fremdsteuerung deaktiviert}
    Bei einer der zu steuernden Wallboxen ist die Fremdsteuerung deaktiviert. Damit ist keine Steuerung durch den Lastmanager möglich. Die Fremdsteuerung kann auf der \texttt{Wallboxen}-Unterseite aktiviert werden.

    \paragraph{Ladecontroller nicht erreichbar}
    Der Ladecontroller einer Wallbox kann nicht erreicht werden, die Wallbox
	selbst aber schon. In diesem Fall sollte das Ereignis-Log der betroffenen
	Wallbox geprüft werden.

    \paragraph{Ladecontroller reagiert nicht}
    Der Ladecontroller einer Wallbox reagiert nicht auf Stromzuweisungen. In diesem Fall sollte das Ereignis-Log der betroffenen Wallbox geprüft werden.

    \subsection{Sicherungswechsel}
    Die Wallbox ist intern über eine 5$\times\SI{20}{\milli\meter}$
	Feinsicherung (träge (T), \SI{2}{\ampere}) abgesichert.
    Tinkerforge verbaut Sicherungen vom Typ \enquote{ESKA 522.520}.
	Die Sicherung befindet sich rechts in der Wallbox auf dem Ladecontroller
	(EVSE) in einem grünen Sicherungsgehäuse.

    \vfill
    \null
    \subsection{Ersatzteile}
	\small{
    \begin{tabular}{ll}
        \toprule
        \textbf{Artikelnummer}                                                                                                      & \textbf{Bauteil}                     \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-CON-2P-63A}											& Schaltschütz 2 Pol,                  \\
                                                                                                                                    & Hutschiene, \SI{63}{\ampere} (2x)\\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-METER-}										    & Eltako DSZ15DZMOD-3x80A               \\
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{3PH-MID}                                                 & Zweirichtungsdrehstromzähler,                     \\
                                                                                                                                    & 3	Phasen, RS485, MID-geeicht\\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-T2-5M-16A}											& Typ-2-Stecker mit                    \\
                                                                                                                                    & \SI{5}{\meter} Kabel                 \\
                                                                                                                                    & \SI{11}{\kilo\watt}/\SI{16}{\ampere} \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-T2-5M-32A}			   								& Typ-2-Stecker mit                    \\
                                                                                                                                    & \SI{5}{\meter} Kabel                 \\
                                                                                                                                    & \SI{22}{\kilo\watt}/\SI{32}{\ampere} \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-T2-75M-16A} 										& Typ-2-Stecker mit                    \\
                                                                                                                                    & \SI{7,5}{\meter} Kabel               \\
                                                                                                                                    & \SI{11}{\kilo\watt}/\SI{16}{\ampere} \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-T2-75M-32A} 										& Typ-2-Stecker mit                    \\
                                                                                                                                    & \SI{7,5}{\meter} Kabel               \\
                                                                                                                                    & \SI{22}{\kilo\watt}/\SI{32}{\ampere} \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-FUSE-2A}                          					& Feinsicherung                     \\
                                                                                                                                    & 5x\SI{20}{\milli\meter}              \\
                                                                                                                                    & träge \SI{2}{\ampere}        \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-NFC-STICKER}                   						& NFC-Aufkleber                        \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-DC-}									  	        & WARP3 DC-Fehlerstrom-                      \\
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{PROTECT}                                                 & schutzmodul (6mA)                    \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-CASE} 												& WARP3 Gehäuse mit\\
																																	& Edelstahlfrontblende                        \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-CASE-PC}											& WARP3 Gehäuse mit\\
																																	& Edelstahlfrontblende DB703 \\
																																	& pulverbeschichtet \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-CABLE-}										& WARP3 Kabelbaum           \\
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{HARNESS}										        & (Basic, Smart, Pro)           \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-DSZ15-CABLE}										& Anschlusskabel für DSZ15                      \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-TERMINAL-}											& WARP3 Klemmen-                       \\
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{BLOCKS}  							                    & Baugruppe                            \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP2-NFC-CARD}											& 3$\times$WARP2/3 NFC-Karten            \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP3-PB-LED}											& Fronttaster mit RGB LED,                     \\
																																	& Anschlusskabel			\\
																																	& Befestigungsmaterial			\\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-RES-220}											& Widerstand \SI{220}{\ohm} (22kW)           \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{WARP-RES-680}											& Widerstand \SI{680}{\ohm} (11kW)            \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{117}														& WARP ESP32 Ethernet Brick                 \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{2177}													& EVSE Bricklet 3.5                    \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{286}  				                                    & NFC Bricklet                         \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{6150}													& Bricklet-Kabel                       \\
                                                                                                                                    & \SI{15}{\centi\meter} (7p-7p)        \\
        \cmidrule(lr{0.5em}){1-2}
        \href{https://www.tinkerforge.com/de/shop/warp/warp3-spare-parts/}{6149}													& Bricklet-Kabel                       \\
                                                                                                                                    & \SI{6}{\centi\meter} (7p-7p) (2x)\\
        \bottomrule
    \end{tabular}
	}

    \newpage
    \section{Technische Daten}
    %use minipage here to control footnote placement
    \begin{minipage}{\linewidth}

        \begin{description}[leftmargin=!,labelwidth=\widthof{\textbf{Fehlerstromerkennung}}]
            \setlength{\itemsep}{3pt}
            \item[Ladestandard] DIN EN 61851‐1
            \item[Ladeleistung] Einstellbar von \SI{1,4}{\kilo\watt}
                  bis \SI{11}{\kilo\watt} / \SI{22}{\kilo\watt}~\footnote[7]{\label{fn:1} je nach Variante}
            \item[Fahrzeugladestecker] Typ 2
            \item[Nennspannung] \SI{230}{\volt} / \SI{400}{\volt} / 1/3
                  AC~\footref{fn:1}
            \item[Nennfrequenz] \SI{50}{\hertz}
            \item[Nennstrom] \SI{16}{\ampere} / \SI{32}{\ampere}
                  \footref{fn:1}
            \item[Ladekabellänge] \SI{5}{\meter} / \SI{7,5}{\meter}~\footref{fn:1}
            \item[Zuleitungsquerschnitt] \SI{2,5}{\square\milli\meter} bis
                  \SI{10}{\square\milli\meter}
            \item[Zuleitungseinführung] Von der Unterseite und Rückseite möglich
            \item[Betriebstemperatur] \SI{-25}{\celsius}
                  bis \SI{+50}{\celsius} (Durchschnitt in \SI{24}{\hour}: $< \SI{35}{\celsius}$)
            \item[Fehlerstromerkennung] DC \SI{6}{\milli\ampere} (integriert)
            \item[Abmessungen] 280 × 215 × \SI{95}{\milli\meter} (B/H/T)
            \item[Gewicht] Je nach Kabellänge, ca. \SI{8}{\kilo\gram}~\footref{fn:1}
            \item[Schutzart] IP54
                  (spritzwassergeschützt, für
                  den Außenbereich geeignet)
            \item[Phasenumschaltung] Intern zwischen ein- und dreiphasig
            \item[Zugangsverriegelung]
                  NFC (RFID)~\footref{fn:1}\\Webinterface~\footref{fn:1}\\API~\footref{fn:1}
            \item[Lastmanagement] Max. 32 WARP, WARP2 und/oder WARP3 Charger~\footref{fn:1}
            \item[NFC-Tags] 3 im Lieferumfang\\max. 32 anlernbar~\footref{fn:1}
            \item[Benutzer] Max. 32 konfigurierbar~\footref{fn:1}
            \item[Schnittstellen] HTTP, MQTT, Modbus TCP, OCPP, SunSpec~\footref{fn:1}
            \item[\S14a EnWG steuerbar] Mittels internen Abschalteingang, über Schnittstellen oder WARP Energy Manager
            \item[Lieferumfang] Wallbox, Betriebsanleitung inkl. Installationsanleitung, Bohrschablone, Prüfprotokoll, 3 NFC-Karten

            \item[Standby, WLAN an] Basic/Smart $\leq\SI{3}{\watt}$; Pro $\leq\SI{5}{\watt}$
            \item[Strommessung] Integrierter MID-geeichter Strom\-zähler nach EU-Messgeräterichtlinie 2014/32/EU~\footref{fn:1}
        \end{description}
    \end{minipage}

    \section{Konformitätserklärung}
    Die EU-Konformitätserklärung zur Wallbox ist in einem gesonderten Dokument verfügbar.

    \section{Entsorgung}
    \begin{minipage}{0.43\textwidth}
        Wallbox und Verpackung sind bei Gebrauchsende ordnungsgemäß zu
        entsorgen. Altgeräte dürfen nicht über den Hausmüll entsorgt werden.
    \end{minipage}\hfill
    \begin{minipage}{0.045\textwidth}
        \includegraphics[width=\linewidth]{./img_warp3/resized/weee.pdf}
    \end{minipage}


    \section{Kontakt}
    Tinkerforge GmbH\\ Helleforthstraße 22-28\\ 33758 Schloß Holte-Stukenbrock
    \begin{description}[leftmargin=!,labelwidth=\widthof{\textbf{Website}}]
        \item[E-Mail] \href{mailto:info@tinkerforge.com}{\texttt{info@tinkerforge.com}}
        \item[Website] \href{https://warp-charger.com}{\texttt{warp-charger.com}}
        \item[Telefon] \phonenumber{+49 5207 897300-0}
        \item[Shop] \href{https://tinkerforge.com/de/shop/warp.html}{\texttt{tinkerforge.com/de/shop/warp.html}}
    \end{description}

    \section{Dokumentversionen}
    \begin{tabular}{lll}
        \toprule
        Datum      & Version\hspace{-0.2pt} & Kommentar        \\
        \midrule
        28.03.2024 & 1.0     & Initialversion                  \\
        13.06.2024 & 1.1     & Aktualisierung Firmware 2.4.0   \\
        10.10.2024 & 1.2     & Aktualisierung Firmware 2.6.0   \\
        \bottomrule
    \end{tabular}


\end{multicols*}

\appendix

\begin{minipage}{0.49\linewidth}
 \section{Modbus TCP Registertabelle}
\label{modbus_tcp_registertabelle}
Nachfolgend die Registertabelle für Modbus TCP für die Einstellung \enquote{WARP
Charger}

\textit{Input Registers} können nur gelesen werden und liefern Informationen über den
Zustand der Wallbox. Gewisse Register sind nur verfügbar, wenn das dazu
angegebene \textit{Feature} verfügbar ist. So sind zum Beispiel die
Informationen zur Ladeleistung, Energie usw. nur verfügbar, wenn die Wallbox
über ein \textit{Meter} verfügt: Ein WARP3 Charger Pro (Version mit
Stromzähler) liefert diese Werte, ein WARP3 Charger Smart (Version ohne
Stromzähler) nicht.

Welche Features die Wallbox bietet, kann über \textit{Discrete Inputs} ausgelesen
werden. Eine Steuerung der Wallbox ist über die \textit{Holding Registers} und \textit{Coils}
möglich.
\end{minipage}


\subsection*{Holding Registers}
\begin{tabularx}{\textwidth}{rXll} \toprule
    \textbf{Register-} & \textbf{Name} & \textbf{Typ} & \textbf{Benötigtes}                                                     \\
    \textbf{adresse}   &      &     & \textbf{Feature}                                                                          \\ \midrule
0             & Reboot                                  & uint32       & ---                                                    \\
              & \tdesc{Startet die Wallbox (bzw. den ESP-Brick) neu, um beispielsweise Konfigurationsänderungen anzuwenden.}    \\
              & \tdesc{Password 0x012EB007}                                                                                     \\ \cmidrule{2-4}
1000          & Ladefreigabe                            & uint32       & evse                                                   \\
              & \tdesc{\textbf{Veraltet! Stattdessen Coil 1000 benutzen!}}                                                      \\
              & \tdesc{0 zum Blockieren des Ladevorgangs; ein Wert != 0 zum Freigeben}                                          \\ \cmidrule{2-4}
1002          & Erlaubter Ladestrom (mA)                & uint32       & evse                                                   \\
              & \tdesc{0mA oder 6000mA bis 32000 mA. Andere Ladestromgrenzen können den Strom weiter verringern!}               \\ \cmidrule{2-4}
1004          & Front-LED-Blinkmuster                   & uint32       & evse                                                   \\
              & \tdesc{Steuert die LED des Fronttasters}                                                                        \\
              & \begin{description}
                    \item[-1] EVSE kontrolliert LED
                    \item[0] LED aus
                    \item[1-254] LED gedimmt
                    \item[255] LED an
                    \item[1001] bekanntes NFC-Tag erkannt
                    \item[1002] unbekanntes NFC-Tag erkannt
                    \item[1003] NFC-Tag notwendig
                    \item[2001-2010] Fehlerblinken 1-10 mal
                \end{description} & &               \\ \cmidrule{2-4}
1006          & Front-LED-Blinkdauer                    & uint32       & evse                                                   \\
              & \tdesc{Die Dauer in Millisekunden, die das in Register 1004 gesetzte Blinkmuster angezeigt werden soll. Max. \SI{65535}{\milli\second}}               \\ \cmidrule{2-4}
2000          & Relative Energie zurücksetzen           & uint32       & meter                                                  \\
              & \tdesc{Setzt den relativen Energiewert zurück (Input Register 2006). Password 0x3E12E5E7}                       \\ \cmidrule{2-4}
3000          & CP-Trennung auslösen                    & uint32       & cp\_disc                                               \\
              & \tdesc{Noch nicht implementiert!}                                                                               \\ \bottomrule
\end{tabularx}

\newpage

\subsection*{Input Registers}
\small
\begin{tabularx}{\textwidth}{rXll} \toprule
    \textbf{Register-} & \textbf{Name}& \textbf{Typ} & \textbf{Benötigtes}                                                      \\
    \textbf{adresse}   &              &              & \textbf{Feature}                                                         \\ \midrule
0             & Version der Registertabelle             & uint32       & ---                                     \\
              & \tdesc{Aktuelle Version: 2}                                                                                     \\ \cmidrule{2-4}
2             & Firmware-Version                       & uint32 (x4)       & ---                                                    \\
              & \tdesc{Major, Minor, Patch, Zeitstempel jeweils uint32. Beispielsweise 2, 0, 8, 0x63218f23 für}                 \\
              & \tdesc{Firmware 2.0.8-63218f23. 0x63218f23 ist der Unix-Zeitstempel des 14. September 2022 08:21:55 UTC.}       \\ \cmidrule{2-4}
10            & Charger-ID                              & uint32       & ---                                                    \\
              & \tdesc{Dekodierte Form der Base58-UID, die für Standard-Hostnamen, -SSID usw. genutzt wird.}                    \\
              & \tdesc{Zum Beispiel 185460 für X8A}                                                                             \\ \cmidrule{2-4}
12            & Uptime (s)                              & uint32       & ---                                                    \\
              & \tdesc{Zeit in Sekunden seit dem Start der Wallbox-Firmware.}                                                   \\ \cmidrule{2-4}
1000          & IEC-61851-Zustand                       & uint32       & evse                                                   \\
              & \tdesc{0-A, 1-B, 2-C, 3-D, 4-E/F}                                                                               \\ \cmidrule{2-4}
1002          & Fahrzeugstatus                          & uint32       & evse                                                   \\
              & \tdesc{0-Nicht verbunden, 1-Warte auf Freigabe, 2-Ladebereit, 3-Lädt, 4-Fehler}                                 \\ \cmidrule{2-4}
1004          & User-ID                                 & uint32       & evse                                                   \\
              & \tdesc{ID des Benutzers der den Ladevorgang gestartet hat. 0 falls eine Freigabe}                               \\
              & \tdesc{ohne Nutzerzuordnung erfolgt ist. 0xFFFFFFFF falls gerade kein Ladevorgang läuft.}                       \\ \cmidrule{2-4}
1006          & Start-Zeitstempel (min)                 & uint32       & evse                                                   \\
              & \tdesc{Ein Unix-Timestamp in Minuten, der den Startzeitpunkt des Ladevorgangs angibt.}                          \\
              & \tdesc{0 falls zum Startzeitpunkt keine Zeitsynchronisierung verfügbar war.}                                    \\ \cmidrule{2-4}
1008          & Ladedauer (s)                           & uint32       & evse                                                   \\
              & \tdesc{Dauer des laufenden Ladevorgangs in Sekunden. Auch ohne Zeitsynchronisierung verfügbar}                  \\ \cmidrule{2-4}
1010          & Erlaubter Ladestrom                     & uint32       & evse                                                   \\
              & \tdesc{Maximal erlaubter Ladestrom, der dem Fahrzeug zur Verfügung gestellt wird.}                              \\
              & \tdesc{Dieser Strom ist das Minimum der Stromgrenzen aller Ladeslots.}                                          \\ \cmidrule{2-4}
1012          & Ladestromgrenzen (mA)                   & uint32 (x20) & evse                                                   \\
              & \tdesc{Aktueller Wert der Ladestromgrenzen in Milliampere. 0xFFFFFFFF falls eine Stromgrenze nicht aktiv ist.}  \\
              & \tdesc{0 falls eine Stromgrenze blockiert. Sonst zwischen 6000 (6A) und 32000 (32A).}                           \\ \cmidrule{2-4}
2000          & Stromzählertyp                          & uint32       & meter                                                  \\
              & \tdesc{0-Kein Stromzähler verfügbar, 1-SDM72 (nur WARP1), 2-SDM630, 3-SDM72 V2}                                 \\ \cmidrule{2-4}
2002          & Ladeleistung (W)                        & float        & meter                                                  \\
              & \tdesc{Die aktuelle Ladeleistung in Watt}                                                                       \\ \cmidrule{2-4}
2004          & absolute Energie (kWh)                  & float        & meter                                                  \\
              & \tdesc{Die geladene Energie seit der Herstellung des Stromzählers.}                                             \\ \cmidrule{2-4}
2006          & relative Energie (kWh)                  & float        & meter                                                  \\
              & \tdesc{Die geladene Energie seit dem letzten Reset. (siehe Holding Register 2000)}                              \\ \cmidrule{2-4}
2008          & Energie des Ladevorgangs                & float        & meter                                                  \\
              & \tdesc{Die während des laufenden Ladevorgangs geladene Energie}                                                 \\ \cmidrule{2-4}
2100          & weitere Stromzähler-Werte               & float (x85)  & all\_values                                            \\
              & \tdesc{Siehe \rurl{https://www.warp-charger.com/api.html\#meter\_all\_values}{warp-charger.com/api.html\#meter\_all\_values}} \\ \cmidrule{2-4}
3000          & CP-Unterbrechung                        & uint32       & cp\_disc                                               \\
              & \tdesc{Noch nicht implementiert!}                                                                               \\ \cmidrule{2-4}
4000          & ID des letzten NFC-Tags (ASCII-kodierter Hex-String) & uint32 (x5)  & nfc                                       \\ \cmidrule{2-4}
4010          & Alter des letzten NFC-Tags              & uint32       & nfc                                                    \\
              & \tdesc{Zeit in Milli­sekunden seitdem das zuletzt erkannten NFC-Tag das letzte mal erkannt wurde.}               \\
              & \tdesc{Zeiten $< \SI{1000}{\milli\second}$ bedeuten typischer­weise, dass das Tag gerade an die Wallbox gehalten wird.}             \\ \bottomrule
\end{tabularx}
\normalsize

\newpage

\subsection*{Discrete Inputs}
\begin{tabularx}{\textwidth}{rXll} \toprule
    \textbf{Register-} & \textbf{Name} & \textbf{Typ} & \textbf{Benötigtes}                                                     \\
    \textbf{adresse}   &      &     & \textbf{Feature}                                                                          \\ \midrule
0             & Feature \enquote{evse} verfügbar        & bool         & ---                                                    \\
              & \tdesc{Ein Ladecontroller steht zur Verfügung. Dieses Feature sollte bei allen WARP Chargern,}                  \\
              & \tdesc{deren Hardware funktionsfähig ist, vorhanden sein.}                                                      \\ \cmidrule{2-4}
1             & Feature \enquote{meter} verfügbar       & bool         & ---                                                    \\
              & \tdesc{Ein Stromzähler und Hardware zum Auslesen desselben über RS485 ist verfügbar. Dieses Feature wird }      \\
              & \tdesc{erst gesetzt, wenn ein Stromzähler mindestens einmal erfolgreich über Modbus ausgelesen wurde.}          \\ \cmidrule{2-4}
2             & Feature \enquote{phases} verfügbar      & bool         & ---                                                    \\
              & \tdesc{Der verbaute Stromzähler kann Energie und weitere Messwerte einzelner Phasen messen.}                    \\ \cmidrule{2-4}
3             & Feature \enquote{all\_values} verfügbar & bool         & ---                                                    \\
              & \tdesc{Der verbaute Stromzähler kann weitere Messwerte auslesen.}                                               \\ \cmidrule{2-4}
4             & Feature \enquote{cp\_disc} verfügbar    & bool         & ---                                                    \\
              & \tdesc{Noch nicht implementiert!}                                                                               \\ \cmidrule{2-4}
2100          & Phase L1 angeschlossen                  & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \cmidrule{2-4}
2101          & Phase L2 angeschlossen                  & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \cmidrule{2-4}
2102          & Phase L3 angeschlossen                  & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \cmidrule{2-4}
2103          & Phase L1 aktiv                          & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \cmidrule{2-4}
2104          & Phase L2 aktiv                          & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \cmidrule{2-4}
2105          & Phase L3 aktiv                          & bool         & phases                                                 \\
              & \tdesc{}                                                                                                        \\ \bottomrule
   \end{tabularx}

\subsection*{Coils}
\begin{tabularx}{\textwidth}{rXll} \toprule
    \textbf{Register-} & \textbf{Name} & \textbf{Typ} & \textbf{Benötigtes}                                                     \\
    \textbf{adresse}   &      &     & \textbf{Feature}                                                                          \\ \midrule
1000          & Ladefreigabe        & bool         & evse                                                                       \\
              & \tdesc{false bzw. 0 zum blockieren, true bzw. 1 zum Freigeben.}                                                 \\
              & \tdesc{(Identisch zu Holding Register 1000)}                                                                     \\ \cmidrule{2-4}
2105          & Manuelle Ladefreigabe                   & bool         & evse                                                 \\
              & \tdesc{false bzw. 0 zum blockieren, true bzw. 1 zum Freigeben.}                                               \\
              & \tdesc{Setzt die Lade­freigabe, die auch (je nach Kon­figura­tion) vom Taster, den Start/Stop-Buttons}            \\
              & \tdesc{auf der Web­inter­face-Status­seite und der evse/[start/stop]\_charging-API verwendet wird.}                                                                                                                                                                             \\ \bottomrule
   \end{tabularx}

   \newpage

	\pagecolor{covergray}\afterpage{\nopagecolor}

   \begin{multicols*}{2}
    \pagestyle{empty}
    \null
    \vfill
	\color{white}
    WLAN-Zugangsdaten
    \begin{tcolorbox}[width=4.2cm,height=2.7cm, boxrule=0.25mm]

    \end{tcolorbox}
    Dieser Aufkleber befindet sich\\ auch im Inneren der Wallbox.
    \columnbreak

    \null
    \vfill
    Typenschild
    \begin{tcolorbox}[width=7.8cm,height=4.1cm, boxrule=0.25mm]

    \end{tcolorbox}
    Dieser Aufkleber befindet sich auch auf der Unterseite\\ der Wallbox.
\end{multicols*}
\end{document}
